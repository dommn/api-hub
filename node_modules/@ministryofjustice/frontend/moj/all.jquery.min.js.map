{"version":3,"file":"all.jquery.min.js","sources":["../../src/moj/components/add-another/add-another.mjs","../../src/moj/helpers.mjs","../../src/moj/components/alert/alert.mjs","../../src/moj/components/button-menu/button-menu.mjs","../../src/moj/components/date-picker/date-picker.mjs","../../src/moj/components/filter-toggle-button/filter-toggle-button.mjs","../../src/moj/components/multi-file-upload/multi-file-upload.mjs","../../src/moj/components/multi-select/multi-select.mjs","../../src/moj/components/password-reveal/password-reveal.mjs","../../src/moj/components/rich-text-editor/rich-text-editor.mjs","../../src/moj/components/search-toggle/search-toggle.mjs","../../src/moj/components/sortable-table/sortable-table.mjs","../../src/moj/all.mjs","../../src/moj/version.mjs"],"sourcesContent":["import $ from 'jquery'\n\nexport function AddAnother(container) {\n  this.container = $(container)\n\n  if (this.container.data('moj-add-another-initialised')) {\n    return\n  }\n\n  this.container.data('moj-add-another-initialised', true)\n\n  this.container.on(\n    'click',\n    '.moj-add-another__remove-button',\n    $.proxy(this, 'onRemoveButtonClick')\n  )\n  this.container.on(\n    'click',\n    '.moj-add-another__add-button',\n    $.proxy(this, 'onAddButtonClick')\n  )\n  this.container\n    .find('.moj-add-another__add-button, moj-add-another__remove-button')\n    .prop('type', 'button')\n}\n\nAddAnother.prototype.onAddButtonClick = function (e) {\n  const item = this.getNewItem()\n  this.updateAttributes(this.getItems().length, item)\n  this.resetItem(item)\n  const firstItem = this.getItems().first()\n  if (!this.hasRemoveButton(firstItem)) {\n    this.createRemoveButton(firstItem)\n  }\n  this.getItems().last().after(item)\n  item.find('input, textarea, select').first().focus()\n}\n\nAddAnother.prototype.hasRemoveButton = function (item) {\n  return item.find('.moj-add-another__remove-button').length\n}\n\nAddAnother.prototype.getItems = function () {\n  return this.container.find('.moj-add-another__item')\n}\n\nAddAnother.prototype.getNewItem = function () {\n  const item = this.getItems().first().clone()\n  if (!this.hasRemoveButton(item)) {\n    this.createRemoveButton(item)\n  }\n  return item\n}\n\nAddAnother.prototype.updateAttributes = function (index, item) {\n  item.find('[data-name]').each(function (i, el) {\n    const originalId = el.id\n\n    el.name = $(el)\n      .attr('data-name')\n      .replace(/%index%/, index)\n    el.id = $(el)\n      .attr('data-id')\n      .replace(/%index%/, index)\n\n    const label =\n      $(el).siblings('label')[0] ||\n      $(el).parents('label')[0] ||\n      item.find(`[for=\"${originalId}\"]`)[0]\n    label.htmlFor = el.id\n  })\n}\n\nAddAnother.prototype.createRemoveButton = function (item) {\n  item.append(\n    '<button type=\"button\" class=\"govuk-button govuk-button--secondary moj-add-another__remove-button\">Remove</button>'\n  )\n}\n\nAddAnother.prototype.resetItem = function (item) {\n  item.find('[data-name], [data-id]').each(function (index, el) {\n    if (el.type === 'checkbox' || el.type === 'radio') {\n      el.checked = false\n    } else {\n      el.value = ''\n    }\n  })\n}\n\nAddAnother.prototype.onRemoveButtonClick = function (e) {\n  $(e.currentTarget).parents('.moj-add-another__item').remove()\n  const items = this.getItems()\n  if (items.length === 1) {\n    items.find('.moj-add-another__remove-button').remove()\n  }\n  items.each(\n    $.proxy(function (index, el) {\n      this.updateAttributes(index, $(el))\n    }, this)\n  )\n  this.focusHeading()\n}\n\nAddAnother.prototype.focusHeading = function () {\n  this.container.find('.moj-add-another__heading').get(0).focus()\n}\n","export function removeAttributeValue(el, attr, value) {\n  let re, m\n  if (el.getAttribute(attr)) {\n    if (el.getAttribute(attr) === value) {\n      el.removeAttribute(attr)\n    } else {\n      re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n      m = el.getAttribute(attr).match(re)\n      if (m && m.length === 3) {\n        el.setAttribute(\n          attr,\n          el.getAttribute(attr).replace(re, m[1] && m[2] ? ' ' : '')\n        )\n      }\n    }\n  }\n}\n\nexport function addAttributeValue(el, attr, value) {\n  let re\n  if (!el.getAttribute(attr)) {\n    el.setAttribute(attr, value)\n  } else {\n    re = new RegExp(`(^|\\\\s)${value}(\\\\s|$)`)\n    if (!re.test(el.getAttribute(attr))) {\n      el.setAttribute(attr, `${el.getAttribute(attr)} ${value}`)\n    }\n  }\n}\n\nexport function dragAndDropSupported() {\n  const div = document.createElement('div')\n  return typeof div.ondrop !== 'undefined'\n}\n\nexport function formDataSupported() {\n  return typeof FormData === 'function'\n}\n\nexport function fileApiSupported() {\n  const input = document.createElement('input')\n  input.type = 'file'\n  return typeof input.files !== 'undefined'\n}\n\nexport function nodeListForEach(nodes, callback) {\n  if (window.NodeList.prototype.forEach) {\n    return nodes.forEach(callback)\n  }\n  for (let i = 0; i < nodes.length; i++) {\n    callback.call(window, nodes[i], i, nodes)\n  }\n}\n\n/**\n * Find an elements next sibling\n *\n * Utility function to find an elements next sibling matching the provided\n * selector.\n *\n * @param {HTMLElement} $element - Element to find siblings for\n * @param {string} selector - selector for required sibling\n */\nexport function getNextSibling($element, selector) {\n  if (!$element) return\n  // Get the next sibling element\n  let $sibling = $element.nextElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.nextElementSibling\n  }\n}\n\n/**\n * Find an elements preceding sibling\n *\n * Utility function to find an elements previous sibling matching the provided\n * selector.\n *\n * @param {HTMLElement} $element - Element to find siblings for\n * @param {string} selector - selector for required sibling\n */\nexport function getPreviousSibling($element, selector) {\n  if (!$element) return\n  // Get the previous sibling element\n  let $sibling = $element.previousElementSibling\n\n  // If there's no selector, return the first sibling\n  if (!selector) return $sibling\n\n  // If the sibling matches our selector, use it\n  // If not, jump to the next sibling and continue the loop\n  while ($sibling) {\n    if ($sibling.matches(selector)) return $sibling\n    $sibling = $sibling.previousElementSibling\n  }\n}\n\nexport function findNearestMatchingElement($element, selector) {\n  // If no element or selector is provided, return null\n  if (!$element) return\n  if (!selector) return\n\n  // Start with the current element\n  let $currentElement = $element\n\n  while ($currentElement) {\n    // First check the current element\n    if ($currentElement.matches(selector)) {\n      return $currentElement\n    }\n\n    // Check all previous siblings\n    let $sibling = $currentElement.previousElementSibling\n    while ($sibling) {\n      // Check if the sibling itself is a heading\n      if ($sibling.matches(selector)) {\n        return $sibling\n      }\n      $sibling = $sibling.previousElementSibling\n    }\n\n    // If no match found in siblings, move up to parent\n    $currentElement = $currentElement.parentElement\n  }\n}\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * @param {HTMLElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: HTMLElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: HTMLElement): void} [options.onBlur] - Callback on blur\n */\nexport function setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex')\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.addEventListener('blur', onBlur, { once: true })\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    if (options.onBlur) {\n      options.onBlur.call($element)\n    }\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex')\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus, { once: true })\n\n  // Focus element\n  if (options.onBeforeFocus) {\n    options.onBeforeFocus.call($element)\n  }\n  $element.focus()\n}\n","import {\n  findNearestMatchingElement,\n  getPreviousSibling,\n  setFocus\n} from '../../helpers.mjs'\n\n/**\n * @typedef {object} AlertConfig\n * @property {boolean} [dismissible=false] - Can the alert be dismissed by the user\n * @property {string} [dismissText=Dismiss] - the label text for the dismiss button\n * @property {boolean} [disableAutoFocus=false] - whether the alert will be autofocused\n * @property {string} [focusOnDismissSelector] - CSS Selector for element to be focused on dismiss\n */\n\n/**\n * @param {HTMLElement} $module - the Alert element\n * @param {AlertConfig} config - configuration options\n * @class\n */\nexport function Alert($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      dismissible: { type: 'boolean' },\n      dismissText: { type: 'string' },\n      disableAutoFocus: { type: 'boolean' },\n      focusOnDismissSelector: { type: 'string' }\n    }\n  })\n\n  const defaults = {\n    dismissible: false,\n    dismissText: 'Dismiss',\n    disableAutoFocus: false\n  }\n\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  )\n\n  this.$module = $module\n}\n\nAlert.prototype.init = function () {\n  /**\n   * Focus the alert\n   *\n   * If `role=\"alert\"` is set, focus the element to help some assistive\n   * technologies prioritise announcing it.\n   *\n   * You can turn off the auto-focus functionality by setting\n   * `data-disable-auto-focus=\"true\"` in the component HTML. You might wish to\n   * do this based on user research findings, or to avoid a clash with another\n   * element which should be focused when the page loads.\n   */\n  if (\n    this.$module.getAttribute('role') === 'alert' &&\n    !this.config.disableAutoFocus\n  ) {\n    setFocus(this.$module)\n  }\n\n  this.$dismissButton = this.$module.querySelector('.moj-alert__dismiss')\n\n  if (this.config.dismissible && this.$dismissButton) {\n    this.$dismissButton.innerHTML = this.config.dismissText\n    this.$dismissButton.removeAttribute('hidden')\n\n    this.$module.addEventListener('click', (event) => {\n      if (this.$dismissButton.contains(event.target)) {\n        this.dimiss()\n      }\n    })\n  }\n}\n\n/**\n * Handle dismissing the alert\n */\nAlert.prototype.dimiss = function () {\n  let $elementToRecieveFocus\n\n  // If a selector has been provided, attempt to find that element\n  if (this.config.focusOnDismissSelector) {\n    $elementToRecieveFocus = document.querySelector(\n      this.config.focusOnDismissSelector\n    )\n  }\n\n  // Is the next sibling another alert\n  if (!$elementToRecieveFocus) {\n    const $nextSibling = this.$module.nextElementSibling\n    if ($nextSibling && $nextSibling.matches('.moj-alert')) {\n      $elementToRecieveFocus = $nextSibling\n    }\n  }\n\n  // Else try to find any preceding sibling alert or heading\n  if (!$elementToRecieveFocus) {\n    $elementToRecieveFocus = getPreviousSibling(\n      this.$module,\n      '.moj-alert, h1, h2, h3, h4, h5, h6'\n    )\n  }\n\n  // Else find the closest ancestor heading, or fallback to main, or last resort\n  // use the body element\n  if (!$elementToRecieveFocus) {\n    $elementToRecieveFocus = findNearestMatchingElement(\n      this.$module,\n      'h1, h2, h3, h4, h5, h6, main, body'\n    )\n  }\n\n  // If we have an element, place focus on it\n  if ($elementToRecieveFocus) {\n    setFocus($elementToRecieveFocus)\n  }\n\n  // Remove the alert\n  this.$module.remove()\n}\n\n/**\n * Normalise string\n *\n * 'If it looks like a duck, and it quacks like a duckâ€¦' ðŸ¦†\n *\n * If the passed value looks like a boolean or a number, convert it to a boolean\n * or number.\n *\n * Designed to be used to convert config passed via data attributes (which are\n * always strings) into something sensible.\n *\n * @internal\n * @param {DOMStringMap[string]} value - The value to normalise\n * @param {SchemaProperty} [property] - Component schema property\n * @returns {string | boolean | number | undefined} Normalised data\n */\nAlert.prototype.normaliseString = function (value, property) {\n  const trimmedValue = value ? value.trim() : ''\n\n  let output\n  let outputType\n  if (property && property.type) {\n    outputType = property.type\n  }\n\n  // No schema type set? Determine automatically\n  if (!outputType) {\n    if (['true', 'false'].includes(trimmedValue)) {\n      outputType = 'boolean'\n    }\n\n    // Empty / whitespace-only strings are considered finite so we need to check\n    // the length of the trimmed string as well\n    if (trimmedValue.length > 0 && isFinite(Number(trimmedValue))) {\n      outputType = 'number'\n    }\n  }\n\n  switch (outputType) {\n    case 'boolean':\n      output = trimmedValue === 'true'\n      break\n\n    case 'number':\n      output = Number(trimmedValue)\n      break\n\n    default:\n      output = value\n  }\n\n  return output\n}\n\n/**\n * Parse dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding nested `i18n.field`\n *\n * @param {Schema} schema - component schema\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nAlert.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {}\n\n  for (const [field, property] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      if (dataset[field]) {\n        parsed[field] = this.normaliseString(dataset[field], property)\n      }\n    }\n  }\n\n  return parsed\n}\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nAlert.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override)\n      } else {\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n","/**\n * @typedef {object} ButtonMenuConfig\n * @property {string} [buttonText=Actions] - Label for the toggle button\n * @property {\"left\" | \"right\"} [alignMenu=left] - the alignment of the menu\n * @property {string} [buttonClasses=govuk-button--secondary] - css classes applied to the toggle button\n */\n\n/**\n * @param {HTMLElement} $module\n * @param {ButtonMenuConfig} config\n * @class\n */\nexport function ButtonMenu($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      buttonText: { type: 'string' },\n      buttonClasses: { type: 'string' },\n      alignMenu: { type: 'string' }\n    }\n  })\n\n  const defaults = {\n    buttonText: 'Actions',\n    alignMenu: 'left',\n    buttonClasses: ''\n  }\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  )\n\n  this.$module = $module\n}\n\nButtonMenu.prototype.init = function () {\n  // If only one button is provided, don't initiate a menu and toggle button\n  // if classes have been provided for the toggleButton, apply them to the single item\n  if (this.$module.children.length === 1) {\n    const button = this.$module.children[0]\n    button.classList.forEach((className) => {\n      if (className.startsWith('govuk-button-')) {\n        button.classList.remove(className)\n      }\n      button.classList.remove('moj-button-menu__item')\n    })\n    if (this.config.buttonClasses) {\n      button.classList.add(...this.config.buttonClasses.split(' '))\n    }\n  }\n  // Otherwise intialise a button menu\n  if (this.$module.children.length > 1) {\n    this.initMenu()\n  }\n}\n\nButtonMenu.prototype.initMenu = function () {\n  this.$menu = this.createMenu()\n  this.$module.insertAdjacentHTML('afterbegin', this.toggleTemplate())\n  this.setupMenuItems()\n\n  this.$menuToggle = this.$module.querySelector(':scope > button')\n  this.items = this.$menu.querySelectorAll('a, button')\n\n  this.$menuToggle.addEventListener('click', (event) => {\n    this.toggleMenu(event)\n  })\n\n  this.$module.addEventListener('keydown', (event) => {\n    this.handleKeyDown(event)\n  })\n\n  document.addEventListener('click', (event) => {\n    if (!this.$module.contains(event.target)) {\n      this.closeMenu(false)\n    }\n  })\n}\n\nButtonMenu.prototype.createMenu = function () {\n  const $menu = document.createElement('ul')\n  $menu.setAttribute('role', 'list')\n  $menu.hidden = true\n  $menu.classList.add('moj-button-menu__wrapper')\n  if (this.config.alignMenu === 'right') {\n    $menu.classList.add('moj-button-menu__wrapper--right')\n  }\n\n  this.$module.appendChild($menu)\n  while (this.$module.firstChild !== $menu) {\n    $menu.appendChild(this.$module.firstChild)\n  }\n\n  return $menu\n}\n\nButtonMenu.prototype.setupMenuItems = function () {\n  Array.from(this.$menu.children).forEach((item) => {\n    // wrap item in li tag\n    const listItem = document.createElement('li')\n    this.$menu.insertBefore(listItem, item)\n    listItem.appendChild(item)\n\n    item.setAttribute('tabindex', -1)\n\n    if (item.tagName === 'BUTTON') {\n      item.setAttribute('type', 'button')\n    }\n\n    item.classList.forEach((className) => {\n      if (className.startsWith('govuk-button')) {\n        item.classList.remove(className)\n      }\n    })\n\n    // add a slight delay after click before closing the menu, makes it *feel* better\n    item.addEventListener('click', (event) => {\n      setTimeout(() => {\n        this.closeMenu(false)\n      }, 50)\n    })\n  })\n}\n\nButtonMenu.prototype.toggleTemplate = function () {\n  return `\n    <button type=\"button\" class=\"govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses || ''}\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      <span>\n       ${this.config.buttonText}\n       <svg width=\"11\" height=\"5\" viewBox=\"0 0 11 5\"  xmlns=\"http://www.w3.org/2000/svg\">\n         <path d=\"M5.5 0L11 5L0 5L5.5 0Z\" fill=\"currentColor\"/>\n       </svg>\n      </span>\n    </button>`\n}\n\n/**\n * @returns {boolean}\n */\nButtonMenu.prototype.isOpen = function () {\n  return this.$menuToggle.getAttribute('aria-expanded') === 'true'\n}\n\nButtonMenu.prototype.toggleMenu = function (event) {\n  event.preventDefault()\n\n  // If menu is triggered with mouse don't move focus to first item\n  const keyboardEvent = event.detail === 0\n  const focusIndex = keyboardEvent ? 0 : -1\n\n  if (this.isOpen()) {\n    this.closeMenu()\n  } else {\n    this.openMenu(focusIndex)\n  }\n}\n\n/**\n * Opens the menu and optionally sets the focus to the item with given index\n *\n * @param {number} focusIndex - The index of the item to focus\n */\nButtonMenu.prototype.openMenu = function (focusIndex = 0) {\n  this.$menu.hidden = false\n  this.$menuToggle.setAttribute('aria-expanded', 'true')\n  if (focusIndex !== -1) {\n    this.focusItem(focusIndex)\n  }\n}\n\n/**\n * Closes the menu and optionally returns focus back to menuToggle\n *\n * @param {boolean} moveFocus - whether to return focus to the toggle button\n */\nButtonMenu.prototype.closeMenu = function (moveFocus = true) {\n  this.$menu.hidden = true\n  this.$menuToggle.setAttribute('aria-expanded', 'false')\n  if (moveFocus) {\n    this.$menuToggle.focus()\n  }\n}\n\n/**\n * Focuses the menu item at the specified index\n *\n * @param {number} index - the index of the item to focus\n */\nButtonMenu.prototype.focusItem = function (index) {\n  if (index >= this.items.length) index = 0\n  if (index < 0) index = this.items.length - 1\n\n  const menuItem = this.items.item(index)\n  if (menuItem) {\n    menuItem.focus()\n  }\n}\n\nButtonMenu.prototype.currentFocusIndex = function () {\n  const activeElement = document.activeElement\n  const menuItems = Array.from(this.items)\n\n  return menuItems.indexOf(activeElement)\n}\n\nButtonMenu.prototype.handleKeyDown = function (event) {\n  if (event.target === this.$menuToggle) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault()\n        this.openMenu()\n        break\n      case 'ArrowUp':\n        event.preventDefault()\n        this.openMenu(this.items.length - 1)\n        break\n    }\n  }\n\n  if (this.$menu.contains(event.target) && this.isOpen()) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault()\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() + 1)\n        }\n        break\n      case 'ArrowUp':\n        event.preventDefault()\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() - 1)\n        }\n        break\n      case 'Home':\n        event.preventDefault()\n        this.focusItem(0)\n        break\n      case 'End':\n        event.preventDefault()\n        this.focusItem(this.items.length - 1)\n        break\n    }\n  }\n\n  if (event.key === 'Escape' && this.isOpen()) {\n    this.closeMenu()\n  }\n  if (event.key === 'Tab' && this.isOpen()) {\n    this.closeMenu(false)\n  }\n}\n\n/**\n * Parse dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding nested `i18n.field`\n *\n * @param {Schema} schema - component schema\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nButtonMenu.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {}\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      if (dataset[field]) {\n        parsed[field] = dataset[field]\n      }\n    }\n  }\n\n  return parsed\n}\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nButtonMenu.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override)\n      } else {\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n","/**\n * Date picker config\n *\n * @typedef {object} DatePickerConfig\n * @property {string} [excludedDates] - Dates that cannot be selected\n * @property {string} [excludedDays] - Days that cannot be selected\n * @property {boolean} [leadingZeroes] - Whether to add leading zeroes when populating the field\n * @property {string} [minDate] - The earliest available date\n * @property {string} [maxDate] - The latest available date\n * @property {string} [weekStartDay] - First day of the week in calendar view\n */\n\n/**\n * @param {HTMLElement} $module - HTML element\n * @param {DatePickerConfig} config - config object\n * @class\n */\nexport function DatePicker($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      excludedDates: { type: 'string' },\n      excludedDays: { type: 'string' },\n      leadingZeros: { type: 'string' },\n      maxDate: { type: 'string' },\n      minDate: { type: 'string' },\n      weekStartDay: { type: 'string' }\n    }\n  })\n\n  const defaults = {\n    leadingZeros: false,\n    weekStartDay: 'monday'\n  }\n\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  )\n\n  this.dayLabels = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n    'Sunday'\n  ]\n\n  this.monthLabels = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ]\n\n  this.currentDate = new Date()\n  this.currentDate.setHours(0, 0, 0, 0)\n  this.calendarDays = []\n  this.excludedDates = []\n  this.excludedDays = []\n\n  this.buttonClass = 'moj-datepicker__button'\n  this.selectedDayButtonClass = 'moj-datepicker__button--selected'\n  this.currentDayButtonClass = 'moj-datepicker__button--current'\n  this.todayButtonClass = 'moj-datepicker__button--today'\n\n  this.$module = $module\n  this.$input = $module.querySelector('.moj-js-datepicker-input')\n}\n\nDatePicker.prototype.init = function () {\n  // Check that required elements are present\n  if (!this.$input) {\n    return\n  }\n  if (this.$module.dataset.initialized) {\n    return\n  }\n\n  this.setOptions()\n  this.initControls()\n  this.$module.setAttribute('data-initialized', 'true')\n}\n\nDatePicker.prototype.initControls = function () {\n  this.id = `datepicker-${this.$input.id}`\n\n  this.$dialog = this.createDialog()\n  this.createCalendarHeaders()\n\n  const $componentWrapper = document.createElement('div')\n  const $inputWrapper = document.createElement('div')\n  $componentWrapper.classList.add('moj-datepicker__wrapper')\n  $inputWrapper.classList.add('govuk-input__wrapper')\n\n  this.$input.parentNode.insertBefore($componentWrapper, this.$input)\n  $componentWrapper.appendChild($inputWrapper)\n  $inputWrapper.appendChild(this.$input)\n\n  $inputWrapper.insertAdjacentHTML('beforeend', this.toggleTemplate())\n  $componentWrapper.insertAdjacentElement('beforeend', this.$dialog)\n\n  this.$calendarButton = this.$module.querySelector('.moj-js-datepicker-toggle')\n  this.$dialogTitle = this.$dialog.querySelector(\n    '.moj-js-datepicker-month-year'\n  )\n\n  this.createCalendar()\n\n  this.$prevMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-month'\n  )\n  this.$prevYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-year'\n  )\n  this.$nextMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-month'\n  )\n  this.$nextYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-year'\n  )\n  this.$cancelButton = this.$dialog.querySelector('.moj-js-datepicker-cancel')\n  this.$okButton = this.$dialog.querySelector('.moj-js-datepicker-ok')\n\n  // add event listeners\n  this.$prevMonthButton.addEventListener('click', (event) =>\n    this.focusPreviousMonth(event, false)\n  )\n  this.$prevYearButton.addEventListener('click', (event) =>\n    this.focusPreviousYear(event, false)\n  )\n  this.$nextMonthButton.addEventListener('click', (event) =>\n    this.focusNextMonth(event, false)\n  )\n  this.$nextYearButton.addEventListener('click', (event) =>\n    this.focusNextYear(event, false)\n  )\n  this.$cancelButton.addEventListener('click', (event) => {\n    event.preventDefault()\n    this.closeDialog(event)\n  })\n  this.$okButton.addEventListener('click', () => {\n    this.selectDate(this.currentDate)\n  })\n\n  const dialogButtons = this.$dialog.querySelectorAll(\n    'button:not([disabled=\"true\"])'\n  )\n  // eslint-disable-next-line prefer-destructuring\n  this.$firstButtonInDialog = dialogButtons[0]\n  this.$lastButtonInDialog = dialogButtons[dialogButtons.length - 1]\n  this.$firstButtonInDialog.addEventListener('keydown', (event) =>\n    this.firstButtonKeydown(event)\n  )\n  this.$lastButtonInDialog.addEventListener('keydown', (event) =>\n    this.lastButtonKeydown(event)\n  )\n\n  this.$calendarButton.addEventListener('click', (event) =>\n    this.toggleDialog(event)\n  )\n\n  this.$dialog.addEventListener('keydown', (event) => {\n    if (event.key === 'Escape') {\n      this.closeDialog()\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  })\n\n  document.body.addEventListener('mouseup', (event) =>\n    this.backgroundClick(event)\n  )\n\n  // populates calendar with initial dates, avoids Wave errors about null buttons\n  this.updateCalendar()\n}\n\nDatePicker.prototype.createDialog = function () {\n  const titleId = `datepicker-title-${this.$input.id}`\n  const $dialog = document.createElement('div')\n\n  $dialog.id = this.id\n  $dialog.setAttribute('class', 'moj-datepicker__dialog')\n  $dialog.setAttribute('role', 'dialog')\n  $dialog.setAttribute('aria-modal', 'true')\n  $dialog.setAttribute('aria-labelledby', titleId)\n  $dialog.innerHTML = this.dialogTemplate(titleId)\n  $dialog.hidden = true\n\n  return $dialog\n}\n\nDatePicker.prototype.createCalendar = function () {\n  const $tbody = this.$dialog.querySelector('tbody')\n  let dayCount = 0\n  for (let i = 0; i < 6; i++) {\n    // create row\n    const $row = $tbody.insertRow(i)\n\n    for (let j = 0; j < 7; j++) {\n      // create cell (day)\n      const $cell = document.createElement('td')\n      const $dateButton = document.createElement('button')\n\n      $cell.appendChild($dateButton)\n      $row.appendChild($cell)\n\n      const calendarDay = new DSCalendarDay($dateButton, dayCount, i, j, this)\n      calendarDay.init()\n      this.calendarDays.push(calendarDay)\n      dayCount++\n    }\n  }\n}\n\nDatePicker.prototype.toggleTemplate = function () {\n  return `<button class=\"moj-datepicker__toggle moj-js-datepicker-toggle\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"${this.id}\" aria-expanded=\"false\">\n            <span class=\"govuk-visually-hidden\">Choose date</span>\n            <svg width=\"32\" height=\"24\" focusable=\"false\" class=\"moj-datepicker-icon\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\">\n              <path\n                fill=\"currentColor\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z\"\n              ></path>\n              <rect x=\"3.66669\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n              <rect x=\"16.8667\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n            </svg>\n          </button>`\n}\n\n/**\n * HTML template for calendar dialog\n *\n * @param {string} [titleId] - Id attribute for dialog title\n * @returns {string}\n */\nDatePicker.prototype.dialogTemplate = function (titleId) {\n  return `<div class=\"moj-datepicker__dialog-header\">\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-year\">\n                <span class=\"govuk-visually-hidden\">Previous year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-month\">\n                <span class=\"govuk-visually-hidden\">Previous month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id=\"${titleId}\" class=\"moj-datepicker__dialog-title moj-js-datepicker-month-year\" aria-live=\"polite\">June 2020</h2>\n\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-month\">\n                <span class=\"govuk-visually-hidden\">Next month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\"  focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-year\">\n                <span class=\"govuk-visually-hidden\">Next year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class=\"moj-datepicker__calendar moj-js-datepicker-grid\" role=\"grid\" aria-labelledby=\"${titleId}\">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class=\"govuk-button-group\">\n            <button type=\"button\" class=\"govuk-button moj-js-datepicker-ok\">Select</button>\n            <button type=\"button\" class=\"govuk-button govuk-button--secondary moj-js-datepicker-cancel\">Close</button>\n          </div>`\n}\n\nDatePicker.prototype.createCalendarHeaders = function () {\n  this.dayLabels.forEach((day) => {\n    const html = `<th scope=\"col\"><span aria-hidden=\"true\">${day.substring(0, 3)}</span><span class=\"govuk-visually-hidden\">${day}</span></th>`\n    const $headerRow = this.$dialog.querySelector('thead > tr')\n    $headerRow.insertAdjacentHTML('beforeend', html)\n  })\n}\n\n/**\n * Pads given number with leading zeros\n *\n * @param {number} value - The value to be padded\n * @param {number} length - The length in characters of the output\n * @returns {string}\n */\nDatePicker.prototype.leadingZeros = function (value, length = 2) {\n  let ret = value.toString()\n\n  while (ret.length < length) {\n    ret = `0${ret}`\n  }\n\n  return ret\n}\n\nDatePicker.prototype.setOptions = function () {\n  this.setMinAndMaxDatesOnCalendar()\n  this.setExcludedDates()\n  this.setExcludedDays()\n  this.setLeadingZeros()\n  this.setWeekStartDay()\n}\n\nDatePicker.prototype.setMinAndMaxDatesOnCalendar = function () {\n  if (this.config.minDate) {\n    this.minDate = this.formattedDateFromString(this.config.minDate, null)\n    if (this.minDate && this.currentDate < this.minDate) {\n      this.currentDate = this.minDate\n    }\n  }\n\n  if (this.config.maxDate) {\n    this.maxDate = this.formattedDateFromString(this.config.maxDate, null)\n    if (this.maxDate && this.currentDate > this.maxDate) {\n      this.currentDate = this.maxDate\n    }\n  }\n}\n\nDatePicker.prototype.setExcludedDates = function () {\n  if (this.config.excludedDates) {\n    this.excludedDates = this.config.excludedDates\n      .replace(/\\s+/, ' ')\n      .split(' ')\n      .map((item) => {\n        return item.includes('-')\n          ? this.parseDateRangeString(item)\n          : this.formattedDateFromString(item)\n      })\n      .flat()\n      .filter((item) => item)\n  }\n}\n\n/*\n * Parses a daterange string into an array of dates\n * @param {String} datestring - A daterange string in the format \"dd/mm/yyyy-dd/mm/yyyy\"\n * @returns {Date[]}\n */\nDatePicker.prototype.parseDateRangeString = function (datestring) {\n  const dates = []\n  const [startDate, endDate] = datestring\n    .split('-')\n    .map((d) => this.formattedDateFromString(d, null))\n\n  if (startDate && endDate) {\n    const date = new Date(startDate.getTime())\n    /* eslint-disable no-unmodified-loop-condition */\n    while (date <= endDate) {\n      dates.push(new Date(date))\n      date.setDate(date.getDate() + 1)\n    }\n    /* eslint-enable no-unmodified-loop-condition */\n  }\n  return dates\n}\n\nDatePicker.prototype.setExcludedDays = function () {\n  if (this.config.excludedDays) {\n    // lowercase and arrange dayLabels to put indexOf sunday == 0 for comparison\n    // with getDay() function\n    const weekDays = this.dayLabels.map((item) => item.toLowerCase())\n    if (this.config.weekStartDay === 'monday') {\n      weekDays.unshift(weekDays.pop())\n    }\n\n    this.excludedDays = this.config.excludedDays\n      .replace(/\\s+/, ' ')\n      .toLowerCase()\n      .split(' ')\n      .map((item) => weekDays.indexOf(item))\n      .filter((item) => item !== -1)\n  }\n}\n\nDatePicker.prototype.setLeadingZeros = function () {\n  if (typeof this.config.leadingZeros !== 'boolean') {\n    if (this.config.leadingZeros.toLowerCase() === 'true') {\n      this.config.leadingZeros = true\n      return\n    }\n    if (this.config.leadingZeros.toLowerCase() === 'false') {\n      this.config.leadingZeros = false\n    }\n  }\n}\n\nDatePicker.prototype.setWeekStartDay = function () {\n  const weekStartDayParam = this.config.weekStartDay\n  if (weekStartDayParam && weekStartDayParam.toLowerCase() === 'sunday') {\n    this.config.weekStartDay = 'sunday'\n    // Rotate dayLabels array to put Sunday as the first item\n    this.dayLabels.unshift(this.dayLabels.pop())\n  } else {\n    this.config.weekStartDay = 'monday'\n  }\n}\n\n/**\n * Determine if a date is selecteable\n *\n * @param {Date} date - the date to check\n * @returns {boolean}\n */\nDatePicker.prototype.isExcludedDate = function (date) {\n  // This comparison does not work correctly - it will exclude the mindate itself\n  // see: https://github.com/ministryofjustice/moj-frontend/issues/923\n  if (this.minDate && this.minDate > date) {\n    return true\n  }\n\n  // This comparison works as expected - the maxdate will not be excluded\n  if (this.maxDate && this.maxDate < date) {\n    return true\n  }\n\n  for (const excludedDate of this.excludedDates) {\n    if (date.toDateString() === excludedDate.toDateString()) {\n      return true\n    }\n  }\n\n  if (this.excludedDays.includes(date.getDay())) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Get a Date object from a string\n *\n * @param {string} dateString - string in the format d/m/yyyy dd/mm/yyyy\n * @param {Date} fallback - date object to return if formatting fails\n * @returns {Date}\n */\nDatePicker.prototype.formattedDateFromString = function (\n  dateString,\n  fallback = new Date()\n) {\n  let formattedDate = null\n  // Accepts d/m/yyyy and dd/mm/yyyy\n  const dateFormatPattern = /(\\d{1,2})([-/,. ])(\\d{1,2})\\2(\\d{4})/\n\n  if (!dateFormatPattern.test(dateString)) return fallback\n\n  const match = dateString.match(dateFormatPattern)\n  const day = match[1]\n  const month = match[3]\n  const year = match[4]\n\n  formattedDate = new Date(`${year}-${month}-${day}`)\n  if (formattedDate instanceof Date && !isNaN(formattedDate)) {\n    return formattedDate\n  }\n  return fallback\n}\n\n/**\n * Get a formatted date string from a Date object\n *\n * @param {Date} date - date to format to a string\n * @returns {string}\n */\nDatePicker.prototype.formattedDateFromDate = function (date) {\n  if (this.config.leadingZeros) {\n    return `${this.leadingZeros(date.getDate())}/${this.leadingZeros(date.getMonth() + 1)}/${date.getFullYear()}`\n  }\n\n  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n}\n\n/**\n * Get a human readable date in the format Monday 2 March 2024\n *\n * @param {Date} date - date to format\n * @returns {string}\n */\nDatePicker.prototype.formattedDateHuman = function (date) {\n  return `${this.dayLabels[(date.getDay() + 6) % 7]} ${date.getDate()} ${this.monthLabels[date.getMonth()]} ${date.getFullYear()}`\n}\n\nDatePicker.prototype.backgroundClick = function (event) {\n  if (\n    this.isOpen() &&\n    !this.$dialog.contains(event.target) &&\n    !this.$input.contains(event.target) &&\n    !this.$calendarButton.contains(event.target)\n  ) {\n    event.preventDefault()\n    this.closeDialog()\n  }\n}\n\nDatePicker.prototype.firstButtonKeydown = function (event) {\n  if (event.key === 'Tab' && event.shiftKey) {\n    this.$lastButtonInDialog.focus()\n    event.preventDefault()\n  }\n}\n\nDatePicker.prototype.lastButtonKeydown = function (event) {\n  if (event.key === 'Tab' && !event.shiftKey) {\n    this.$firstButtonInDialog.focus()\n    event.preventDefault()\n  }\n}\n\n// render calendar\nDatePicker.prototype.updateCalendar = function () {\n  this.$dialogTitle.innerHTML = `${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`\n\n  const day = this.currentDate\n  const firstOfMonth = new Date(day.getFullYear(), day.getMonth(), 1)\n  let dayOfWeek\n\n  if (this.config.weekStartDay === 'monday') {\n    dayOfWeek = firstOfMonth.getDay() === 0 ? 6 : firstOfMonth.getDay() - 1 // Change logic to make Monday first day of week, i.e. 0\n  } else {\n    dayOfWeek = firstOfMonth.getDay()\n  }\n\n  firstOfMonth.setDate(firstOfMonth.getDate() - dayOfWeek)\n\n  const thisDay = new Date(firstOfMonth)\n\n  // loop through our days\n  for (let i = 0; i < this.calendarDays.length; i++) {\n    const hidden = thisDay.getMonth() !== day.getMonth()\n    const disabled = this.isExcludedDate(thisDay)\n\n    this.calendarDays[i].update(thisDay, hidden, disabled)\n\n    thisDay.setDate(thisDay.getDate() + 1)\n  }\n}\n\nDatePicker.prototype.setCurrentDate = function (focus = true) {\n  const { currentDate } = this\n  this.calendarDays.forEach((calendarDay) => {\n    calendarDay.button.classList.add('moj-datepicker__button')\n    calendarDay.button.classList.add('moj-datepicker__calendar-day')\n    calendarDay.button.setAttribute('tabindex', -1)\n    calendarDay.button.classList.remove(this.selectedDayButtonClass)\n    const calendarDayDate = calendarDay.date\n    calendarDayDate.setHours(0, 0, 0, 0)\n\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    if (\n      calendarDayDate.getTime() ===\n      currentDate.getTime() /* && !calendarDay.button.disabled */\n    ) {\n      if (focus) {\n        calendarDay.button.setAttribute('tabindex', 0)\n        calendarDay.button.focus()\n        calendarDay.button.classList.add(this.selectedDayButtonClass)\n      }\n    }\n\n    if (\n      this.inputDate &&\n      calendarDayDate.getTime() === this.inputDate.getTime()\n    ) {\n      calendarDay.button.classList.add(this.currentDayButtonClass)\n      calendarDay.button.setAttribute('aria-current', 'date')\n    } else {\n      calendarDay.button.classList.remove(this.currentDayButtonClass)\n      calendarDay.button.removeAttribute('aria-current')\n    }\n\n    if (calendarDayDate.getTime() === today.getTime()) {\n      calendarDay.button.classList.add(this.todayButtonClass)\n    } else {\n      calendarDay.button.classList.remove(this.todayButtonClass)\n    }\n  })\n\n  // if no date is tab-able, make the first non-disabled date tab-able\n  if (!focus) {\n    const enabledDays = this.calendarDays.filter((calendarDay) => {\n      return (\n        window.getComputedStyle(calendarDay.button).display === 'block' &&\n        !calendarDay.button.disabled\n      )\n    })\n\n    enabledDays[0].button.setAttribute('tabindex', 0)\n\n    this.currentDate = enabledDays[0].date\n  }\n}\n\nDatePicker.prototype.selectDate = function (date) {\n  if (this.isExcludedDate(date)) {\n    return\n  }\n\n  this.$calendarButton.querySelector('span').innerText =\n    `Choose date. Selected date is ${this.formattedDateHuman(date)}`\n  this.$input.value = this.formattedDateFromDate(date)\n\n  const changeEvent = new Event('change', { bubbles: true, cancelable: true })\n  this.$input.dispatchEvent(changeEvent)\n\n  this.closeDialog()\n}\n\nDatePicker.prototype.isOpen = function () {\n  return this.$dialog.classList.contains('moj-datepicker__dialog--open')\n}\n\nDatePicker.prototype.toggleDialog = function (event) {\n  event.preventDefault()\n  if (this.isOpen()) {\n    this.closeDialog()\n  } else {\n    this.setMinAndMaxDatesOnCalendar()\n    this.openDialog()\n  }\n}\n\nDatePicker.prototype.openDialog = function () {\n  this.$dialog.hidden = false\n  this.$dialog.classList.add('moj-datepicker__dialog--open')\n  this.$calendarButton.setAttribute('aria-expanded', 'true')\n\n  // position the dialog\n  // if input is wider than dialog pin it to the right\n  if (this.$input.offsetWidth > this.$dialog.offsetWidth) {\n    this.$dialog.style.right = `0px`\n  }\n  this.$dialog.style.top = `${this.$input.offsetHeight + 3}px`\n\n  // get the date from the input element\n  this.inputDate = this.formattedDateFromString(this.$input.value)\n  this.currentDate = this.inputDate\n  this.currentDate.setHours(0, 0, 0, 0)\n\n  this.updateCalendar()\n  this.setCurrentDate()\n}\n\nDatePicker.prototype.closeDialog = function () {\n  this.$dialog.hidden = true\n  this.$dialog.classList.remove('moj-datepicker__dialog--open')\n  this.$calendarButton.setAttribute('aria-expanded', 'false')\n  this.$calendarButton.focus()\n}\n\nDatePicker.prototype.goToDate = function (date, focus) {\n  const current = this.currentDate\n  this.currentDate = date\n\n  if (\n    current.getMonth() !== this.currentDate.getMonth() ||\n    current.getFullYear() !== this.currentDate.getFullYear()\n  ) {\n    this.updateCalendar()\n  }\n\n  this.setCurrentDate(focus)\n}\n\n// day navigation\nDatePicker.prototype.focusNextDay = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() + 1)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusPreviousDay = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() - 1)\n  this.goToDate(date)\n}\n\n// week navigation\nDatePicker.prototype.focusNextWeek = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() + 7)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusPreviousWeek = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() - 7)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusFirstDayOfWeek = function () {\n  const date = new Date(this.currentDate)\n  const firstDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 0 : 1\n  const dayOfWeek = date.getDay()\n  const diff =\n    dayOfWeek >= firstDayOfWeekIndex\n      ? dayOfWeek - firstDayOfWeekIndex\n      : 6 - dayOfWeek\n\n  date.setDate(date.getDate() - diff)\n  date.setHours(0, 0, 0, 0)\n\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusLastDayOfWeek = function () {\n  const date = new Date(this.currentDate)\n  const lastDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 6 : 0\n  const dayOfWeek = date.getDay()\n  const diff =\n    dayOfWeek <= lastDayOfWeekIndex\n      ? lastDayOfWeekIndex - dayOfWeek\n      : 7 - dayOfWeek\n\n  date.setDate(date.getDate() + diff)\n  date.setHours(0, 0, 0, 0)\n\n  this.goToDate(date)\n}\n\n// month navigation\nDatePicker.prototype.focusNextMonth = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setMonth(date.getMonth() + 1, 1)\n  this.goToDate(date, focus)\n}\n\nDatePicker.prototype.focusPreviousMonth = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setMonth(date.getMonth() - 1, 1)\n  this.goToDate(date, focus)\n}\n\n// year navigation\nDatePicker.prototype.focusNextYear = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setFullYear(date.getFullYear() + 1, date.getMonth(), 1)\n  this.goToDate(date, focus)\n}\n\nDatePicker.prototype.focusPreviousYear = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setFullYear(date.getFullYear() - 1, date.getMonth(), 1)\n  this.goToDate(date, focus)\n}\n\n/**\n * Parse dataset\n *\n * @param {Schema} schema - Component class\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nDatePicker.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {}\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      parsed[field] = dataset[field]\n    }\n  }\n\n  return parsed\n}\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nDatePicker.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override)\n      } else {\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n *\n * @param {HTMLElement} button\n * @param {number} index\n * @param {number} row\n * @param {number} column\n * @param {DatePicker} picker\n * @class\n */\nfunction DSCalendarDay(button, index, row, column, picker) {\n  this.index = index\n  this.row = row\n  this.column = column\n  this.button = button\n  this.picker = picker\n\n  this.date = new Date()\n}\n\nDSCalendarDay.prototype.init = function () {\n  this.button.addEventListener('keydown', this.keyPress.bind(this))\n  this.button.addEventListener('click', this.click.bind(this))\n}\n\n/**\n * @param {Date} day - the Date for the calendar day\n * @param {boolean} hidden - visibility of the day\n * @param {boolean} disabled - is the day selectable or excluded\n */\nDSCalendarDay.prototype.update = function (day, hidden, disabled) {\n  const label = day.getDate()\n  let accessibleLabel = this.picker.formattedDateHuman(day)\n\n  if (disabled) {\n    this.button.setAttribute('aria-disabled', true)\n    accessibleLabel = `Excluded date, ${accessibleLabel}`\n  } else {\n    this.button.removeAttribute('aria-disabled')\n  }\n\n  if (hidden) {\n    this.button.style.display = 'none'\n  } else {\n    this.button.style.display = 'block'\n  }\n  this.button.setAttribute(\n    'data-testid',\n    this.picker.formattedDateFromDate(day)\n  )\n\n  this.button.innerHTML = `<span class=\"govuk-visually-hidden\">${accessibleLabel}</span><span aria-hidden=\"true\">${label}</span>`\n  this.date = new Date(day)\n}\n\nDSCalendarDay.prototype.click = function (event) {\n  this.picker.goToDate(this.date)\n  this.picker.selectDate(this.date)\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nDSCalendarDay.prototype.keyPress = function (event) {\n  let calendarNavKey = true\n\n  switch (event.key) {\n    case 'ArrowLeft':\n      this.picker.focusPreviousDay()\n      break\n    case 'ArrowRight':\n      this.picker.focusNextDay()\n      break\n    case 'ArrowUp':\n      this.picker.focusPreviousWeek()\n      break\n    case 'ArrowDown':\n      this.picker.focusNextWeek()\n      break\n    case 'Home':\n      this.picker.focusFirstDayOfWeek()\n      break\n    case 'End':\n      this.picker.focusLastDayOfWeek()\n      break\n    case 'PageUp':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusPreviousYear(event)\n        : this.picker.focusPreviousMonth(event)\n      break\n    case 'PageDown':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusNextYear(event)\n        : this.picker.focusNextMonth(event)\n      break\n    default:\n      calendarNavKey = false\n      break\n  }\n\n  if (calendarNavKey) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n}\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n","import $ from 'jquery'\n\nexport function FilterToggleButton(options) {\n  this.options = options\n  this.container = $(this.options.toggleButton.container)\n  this.filterContainer = $(this.options.filter.container)\n\n  this.createToggleButton()\n  this.setupResponsiveChecks()\n  this.filterContainer.attr('tabindex', '-1')\n  if (this.options.startHidden) {\n    this.hideMenu()\n  }\n}\n\nFilterToggleButton.prototype.setupResponsiveChecks = function () {\n  this.mq = window.matchMedia(this.options.bigModeMediaQuery)\n  this.mq.addListener($.proxy(this, 'checkMode'))\n  this.checkMode(this.mq)\n}\n\nFilterToggleButton.prototype.createToggleButton = function () {\n  this.menuButton = $(\n    `<button class=\"govuk-button ${this.options.toggleButton.classes}\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">${this.options.toggleButton.showText}</button>`\n  )\n  this.menuButton.on('click', $.proxy(this, 'onMenuButtonClick'))\n  this.container.append(this.menuButton)\n}\n\nFilterToggleButton.prototype.checkMode = function (mq) {\n  if (mq.matches) {\n    this.enableBigMode()\n  } else {\n    this.enableSmallMode()\n  }\n}\n\nFilterToggleButton.prototype.enableBigMode = function () {\n  this.showMenu()\n  this.removeCloseButton()\n}\n\nFilterToggleButton.prototype.enableSmallMode = function () {\n  this.hideMenu()\n  this.addCloseButton()\n}\n\nFilterToggleButton.prototype.addCloseButton = function () {\n  if (this.options.closeButton) {\n    this.closeButton = $(\n      `<button class=\"moj-filter__close\" type=\"button\">${this.options.closeButton.text}</button>`\n    )\n    this.closeButton.on('click', $.proxy(this, 'onCloseClick'))\n    $(this.options.closeButton.container).append(this.closeButton)\n  }\n}\n\nFilterToggleButton.prototype.onCloseClick = function () {\n  this.hideMenu()\n  this.menuButton.focus()\n}\n\nFilterToggleButton.prototype.removeCloseButton = function () {\n  if (this.closeButton) {\n    this.closeButton.remove()\n    this.closeButton = null\n  }\n}\n\nFilterToggleButton.prototype.hideMenu = function () {\n  this.menuButton.attr('aria-expanded', 'false')\n  this.filterContainer.addClass('moj-js-hidden')\n  this.menuButton.text(this.options.toggleButton.showText)\n}\n\nFilterToggleButton.prototype.showMenu = function () {\n  this.menuButton.attr('aria-expanded', 'true')\n  this.filterContainer.removeClass('moj-js-hidden')\n  this.menuButton.text(this.options.toggleButton.hideText)\n}\n\nFilterToggleButton.prototype.onMenuButtonClick = function () {\n  this.toggle()\n}\n\nFilterToggleButton.prototype.toggle = function () {\n  if (this.menuButton.attr('aria-expanded') === 'false') {\n    this.showMenu()\n    this.filterContainer.get(0).focus()\n  } else {\n    this.hideMenu()\n  }\n}\n","import $ from 'jquery'\n\nimport {\n  dragAndDropSupported,\n  fileApiSupported,\n  formDataSupported\n} from '../../helpers.mjs'\n\nexport function MultiFileUpload(params) {\n  if (!(dragAndDropSupported() && formDataSupported() && fileApiSupported())) {\n    return\n  }\n\n  this.defaultParams = {\n    uploadFileEntryHook: $.noop,\n    uploadFileExitHook: $.noop,\n    uploadFileErrorHook: $.noop,\n    fileDeleteHook: $.noop,\n    uploadStatusText: 'Uploading files, please wait',\n    dropzoneHintText: 'Drag and drop files here or',\n    dropzoneButtonText: 'Choose files'\n  }\n\n  this.params = $.extend({}, this.defaultParams, params)\n  this.container = $(this.params.container)\n\n  this.container.addClass('moj-multi-file-upload--enhanced')\n\n  this.feedbackContainer = this.container.find(\n    '.moj-multi-file__uploaded-files'\n  )\n  this.setupFileInput()\n  this.setupDropzone()\n  this.setupLabel()\n  this.setupStatusBox()\n  this.container.on(\n    'click',\n    '.moj-multi-file-upload__delete',\n    $.proxy(this, 'onFileDeleteClick')\n  )\n}\n\nMultiFileUpload.prototype.setupDropzone = function () {\n  this.fileInput.wrap('<div class=\"moj-multi-file-upload__dropzone\" />')\n  this.dropzone = this.container.find('.moj-multi-file-upload__dropzone')\n  this.dropzone.on('dragover', $.proxy(this, 'onDragOver'))\n  this.dropzone.on('dragleave', $.proxy(this, 'onDragLeave'))\n  this.dropzone.on('drop', $.proxy(this, 'onDrop'))\n}\n\nMultiFileUpload.prototype.setupLabel = function () {\n  this.label = $(\n    `<label for=\"${this.fileInput[0].id}\" class=\"govuk-button govuk-button--secondary\">${this.params.dropzoneButtonText}</label>`\n  )\n  this.dropzone.append(\n    `<p class=\"govuk-body\">${this.params.dropzoneHintText}</p>`\n  )\n  this.dropzone.append(this.label)\n}\n\nMultiFileUpload.prototype.setupFileInput = function () {\n  this.fileInput = this.container.find('.moj-multi-file-upload__input')\n  this.fileInput.on('change', $.proxy(this, 'onFileChange'))\n  this.fileInput.on('focus', $.proxy(this, 'onFileFocus'))\n  this.fileInput.on('blur', $.proxy(this, 'onFileBlur'))\n}\n\nMultiFileUpload.prototype.setupStatusBox = function () {\n  this.status = $(\n    '<div aria-live=\"polite\" role=\"status\" class=\"govuk-visually-hidden\" />'\n  )\n  this.dropzone.append(this.status)\n}\n\nMultiFileUpload.prototype.onDragOver = function (e) {\n  e.preventDefault()\n  this.dropzone.addClass('moj-multi-file-upload--dragover')\n}\n\nMultiFileUpload.prototype.onDragLeave = function () {\n  this.dropzone.removeClass('moj-multi-file-upload--dragover')\n}\n\nMultiFileUpload.prototype.onDrop = function (e) {\n  e.preventDefault()\n  this.dropzone.removeClass('moj-multi-file-upload--dragover')\n  this.feedbackContainer.removeClass('moj-hidden')\n  this.status.html(this.params.uploadStatusText)\n  this.uploadFiles(e.originalEvent.dataTransfer.files)\n}\n\nMultiFileUpload.prototype.uploadFiles = function (files) {\n  for (let i = 0; i < files.length; i++) {\n    this.uploadFile(files[i])\n  }\n}\n\nMultiFileUpload.prototype.onFileChange = function (e) {\n  this.feedbackContainer.removeClass('moj-hidden')\n  this.status.html(this.params.uploadStatusText)\n  this.uploadFiles(e.currentTarget.files)\n  this.fileInput.replaceWith($(e.currentTarget).val('').clone(true))\n  this.setupFileInput()\n  this.fileInput.get(0).focus()\n}\n\nMultiFileUpload.prototype.onFileFocus = function (e) {\n  this.label.addClass('moj-multi-file-upload--focused')\n}\n\nMultiFileUpload.prototype.onFileBlur = function (e) {\n  this.label.removeClass('moj-multi-file-upload--focused')\n}\n\nMultiFileUpload.prototype.getSuccessHtml = function (success) {\n  return `<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg>${success.messageHtml}</span>`\n}\n\nMultiFileUpload.prototype.getErrorHtml = function (error) {\n  return `<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg>${error.message}</span>`\n}\n\nMultiFileUpload.prototype.getFileRowHtml = function (file) {\n  const html = `\n    <div class=\"govuk-summary-list__row moj-multi-file-upload__row\">\n      <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">\n        <span class=\"moj-multi-file-upload__filename\">${file.name}</span>\n        <span class=\"moj-multi-file-upload__progress\">0%</span>\n      </div>\n      <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>\n    </div>`\n  return html\n}\n\nMultiFileUpload.prototype.getDeleteButtonHtml = function (file) {\n  return `<button class=\"moj-multi-file-upload__delete govuk-button govuk-button--secondary govuk-!-margin-bottom-0\" type=\"button\" name=\"delete\" value=\"${file.filename}\">\n      Delete <span class=\"govuk-visually-hidden\">${file.originalname}</span>\n    </button>`\n}\n\nMultiFileUpload.prototype.uploadFile = function (file) {\n  this.params.uploadFileEntryHook(this, file)\n  const item = $(this.getFileRowHtml(file))\n  const formData = new FormData()\n  formData.append('documents', file)\n  this.feedbackContainer.find('.moj-multi-file-upload__list').append(item)\n\n  $.ajax({\n    url: this.params.uploadUrl,\n    type: 'post',\n    data: formData,\n    processData: false,\n    contentType: false,\n    success: $.proxy(function (response) {\n      if (response.error) {\n        item\n          .find('.moj-multi-file-upload__message')\n          .html(this.getErrorHtml(response.error))\n        this.status.html(response.error.message)\n      } else {\n        item\n          .find('.moj-multi-file-upload__message')\n          .html(this.getSuccessHtml(response.success))\n        this.status.html(response.success.messageText)\n      }\n      item\n        .find('.moj-multi-file-upload__actions')\n        .append(this.getDeleteButtonHtml(response.file))\n      this.params.uploadFileExitHook(this, file, response)\n    }, this),\n    error: $.proxy(function (jqXHR, textStatus, errorThrown) {\n      this.params.uploadFileErrorHook(\n        this,\n        file,\n        jqXHR,\n        textStatus,\n        errorThrown\n      )\n    }, this),\n    xhr: function () {\n      const xhr = new XMLHttpRequest()\n      xhr.upload.addEventListener(\n        'progress',\n        function (e) {\n          if (e.lengthComputable) {\n            let percentComplete = e.loaded / e.total\n            percentComplete = parseInt(percentComplete * 100, 10)\n            item\n              .find('.moj-multi-file-upload__progress')\n              .text(` ${percentComplete}%`)\n          }\n        },\n        false\n      )\n      return xhr\n    }\n  })\n}\n\nMultiFileUpload.prototype.onFileDeleteClick = function (e) {\n  e.preventDefault() // if user refreshes page and then deletes\n  const button = $(e.currentTarget)\n  const data = {}\n  data[button[0].name] = button[0].value\n  $.ajax({\n    url: this.params.deleteUrl,\n    type: 'post',\n    dataType: 'json',\n    data,\n    success: $.proxy(function (response) {\n      if (response.error) {\n        // handle error\n      } else {\n        button.parents('.moj-multi-file-upload__row').remove()\n        if (\n          this.feedbackContainer.find('.moj-multi-file-upload__row').length ===\n          0\n        ) {\n          this.feedbackContainer.addClass('moj-hidden')\n        }\n      }\n      this.params.fileDeleteHook(this, response)\n    }, this)\n  })\n}\n","import $ from 'jquery'\n\nexport function MultiSelect(options) {\n  this.container = $(options.container)\n\n  if (this.container.data('moj-multi-select-initialised')) {\n    return\n  }\n\n  this.container.data('moj-multi-select-initialised', true)\n\n  const idPrefix = options.id_prefix\n  let allId = 'checkboxes-all'\n  if (typeof idPrefix !== 'undefined') {\n    allId = `${idPrefix}checkboxes-all`\n  }\n\n  this.toggle = $(this.getToggleHtml(allId))\n  this.toggleButton = this.toggle.find('input')\n  this.toggleButton.on('click', $.proxy(this, 'onButtonClick'))\n  this.container.append(this.toggle)\n  this.checkboxes = $(options.checkboxes)\n  this.checkboxes.on('click', $.proxy(this, 'onCheckboxClick'))\n  this.checked = options.checked || false\n}\n\nMultiSelect.prototype.getToggleHtml = function (allId) {\n  let html = ''\n  html +=\n    '<div class=\"govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox\">'\n  html += `  <input type=\"checkbox\" class=\"govuk-checkboxes__input\" id=\"${allId}\">`\n  html += `  <label class=\"govuk-label govuk-checkboxes__label moj-multi-select__toggle-label\" for=\"${allId}\">`\n  html += '    <span class=\"govuk-visually-hidden\">Select all</span>'\n  html += '  </label>'\n  html += '</div>'\n  return html\n}\n\nMultiSelect.prototype.onButtonClick = function (e) {\n  if (this.checked) {\n    this.uncheckAll()\n    this.toggleButton[0].checked = false\n  } else {\n    this.checkAll()\n    this.toggleButton[0].checked = true\n  }\n}\n\nMultiSelect.prototype.checkAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = true\n    }, this)\n  )\n  this.checked = true\n}\n\nMultiSelect.prototype.uncheckAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = false\n    }, this)\n  )\n  this.checked = false\n}\n\nMultiSelect.prototype.onCheckboxClick = function (e) {\n  if (!e.target.checked) {\n    this.toggleButton[0].checked = false\n    this.checked = false\n  } else {\n    if (this.checkboxes.filter(':checked').length === this.checkboxes.length) {\n      this.toggleButton[0].checked = true\n      this.checked = true\n    }\n  }\n}\n","import $ from 'jquery'\n\nexport function PasswordReveal(element) {\n  this.el = element\n  const $el = $(this.el)\n\n  if ($el.data('moj-password-reveal-initialised')) {\n    return\n  }\n\n  $el.data('moj-password-reveal-initialised', true)\n  $el.attr('spellcheck', 'false')\n\n  $el.wrap('<div class=\"moj-password-reveal\"></div>')\n  this.container = $(this.el).parent()\n  this.createButton()\n}\n\nPasswordReveal.prototype.createButton = function () {\n  this.button = $(\n    '<button type=\"button\" class=\"govuk-button govuk-button--secondary moj-password-reveal__button\">Show <span class=\"govuk-visually-hidden\">password</span></button>'\n  )\n  this.container.append(this.button)\n  this.button.on('click', $.proxy(this, 'onButtonClick'))\n}\n\nPasswordReveal.prototype.onButtonClick = function () {\n  if (this.el.type === 'password') {\n    this.el.type = 'text'\n    this.button.html('Hide <span class=\"govuk-visually-hidden\">password</span>')\n  } else {\n    this.el.type = 'password'\n    this.button.html('Show <span class=\"govuk-visually-hidden\">password</span>')\n  }\n}\n","import $ from 'jquery'\n\nexport function RichTextEditor(options) {\n  if (!('contentEditable' in document.documentElement)) {\n    return\n  }\n\n  this.options = options\n  this.options.toolbar = this.options.toolbar || {\n    bold: false,\n    italic: false,\n    underline: false,\n    bullets: true,\n    numbers: true\n  }\n  this.textarea = this.options.textarea\n  this.container = $(this.textarea).parent()\n\n  if (this.container.data('moj-rich-text-editor-initialised')) {\n    return\n  }\n\n  this.container.data('moj-rich-text-editor-initialised', true)\n\n  this.createToolbar()\n  this.hideDefault()\n  this.configureToolbar()\n  this.keys = {\n    left: 37,\n    right: 39,\n    up: 38,\n    down: 40\n  }\n  this.container.on(\n    'click',\n    '.moj-rich-text-editor__toolbar-button',\n    $.proxy(this, 'onButtonClick')\n  )\n  this.container\n    .find('.moj-rich-text-editor__content')\n    .on('input', $.proxy(this, 'onEditorInput'))\n  this.container.find('label').on('click', $.proxy(this, 'onLabelClick'))\n  this.toolbar.on('keydown', $.proxy(this, 'onToolbarKeydown'))\n}\n\nRichTextEditor.prototype.onToolbarKeydown = function (e) {\n  let focusableButton\n  switch (e.keyCode) {\n    case this.keys.right:\n    case this.keys.down: {\n      focusableButton = this.toolbar.find('button[tabindex=0]')\n      const nextButton = focusableButton.next('button')\n      if (nextButton[0]) {\n        nextButton.focus()\n        focusableButton.attr('tabindex', '-1')\n        nextButton.attr('tabindex', '0')\n      }\n      break\n    }\n    case this.keys.left:\n    case this.keys.up: {\n      focusableButton = this.toolbar.find('button[tabindex=0]')\n      const previousButton = focusableButton.prev('button')\n      if (previousButton[0]) {\n        previousButton.focus()\n        focusableButton.attr('tabindex', '-1')\n        previousButton.attr('tabindex', '0')\n      }\n      break\n    }\n  }\n}\n\nRichTextEditor.prototype.getToolbarHtml = function () {\n  let html = ''\n\n  html += '<div class=\"moj-rich-text-editor__toolbar\" role=\"toolbar\">'\n\n  if (this.options.toolbar.bold) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--bold\" type=\"button\" data-command=\"bold\"><span class=\"govuk-visually-hidden\">Bold</span></button>'\n  }\n\n  if (this.options.toolbar.italic) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--italic\" type=\"button\" data-command=\"italic\"><span class=\"govuk-visually-hidden\">Italic</span></button>'\n  }\n\n  if (this.options.toolbar.underline) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--underline\" type=\"button\" data-command=\"underline\"><span class=\"govuk-visually-hidden\">Underline</span></button>'\n  }\n\n  if (this.options.toolbar.bullets) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--unordered-list\" type=\"button\" data-command=\"insertUnorderedList\"><span class=\"govuk-visually-hidden\">Unordered list</span></button>'\n  }\n\n  if (this.options.toolbar.numbers) {\n    html +=\n      '<button class=\"moj-rich-text-editor__toolbar-button moj-rich-text-editor__toolbar-button--ordered-list\" type=\"button\" data-command=\"insertOrderedList\"><span class=\"govuk-visually-hidden\">Ordered list</span></button>'\n  }\n\n  html += '</div>'\n  return html\n}\n\nRichTextEditor.prototype.getEnhancedHtml = function (val) {\n  return `${this.getToolbarHtml()}<div class=\"govuk-textarea moj-rich-text-editor__content\" contenteditable=\"true\" spellcheck=\"false\"></div>`\n}\n\nRichTextEditor.prototype.hideDefault = function () {\n  this.textarea = this.container.find('textarea')\n  this.textarea.addClass('govuk-visually-hidden')\n  this.textarea.attr('aria-hidden', true)\n  this.textarea.attr('tabindex', '-1')\n}\n\nRichTextEditor.prototype.createToolbar = function () {\n  this.toolbar = document.createElement('div')\n  this.toolbar.className = 'moj-rich-text-editor'\n  this.toolbar.innerHTML = this.getEnhancedHtml()\n  this.container.append(this.toolbar)\n  this.toolbar = this.container.find('.moj-rich-text-editor__toolbar')\n  this.container\n    .find('.moj-rich-text-editor__content')\n    .html(this.textarea.val())\n}\n\nRichTextEditor.prototype.configureToolbar = function () {\n  this.buttons = this.container.find('.moj-rich-text-editor__toolbar-button')\n  this.buttons.prop('tabindex', '-1')\n  const firstTab = this.buttons.first()\n  firstTab.prop('tabindex', '0')\n}\n\nRichTextEditor.prototype.onButtonClick = function (e) {\n  document.execCommand($(e.currentTarget).data('command'), false, null)\n}\n\nRichTextEditor.prototype.getContent = function () {\n  return this.container.find('.moj-rich-text-editor__content').html()\n}\n\nRichTextEditor.prototype.onEditorInput = function (e) {\n  this.updateTextarea()\n}\n\nRichTextEditor.prototype.updateTextarea = function () {\n  document.execCommand('defaultParagraphSeparator', false, 'p')\n  this.textarea.val(this.getContent())\n}\n\nRichTextEditor.prototype.onLabelClick = function (e) {\n  e.preventDefault()\n  this.container.find('.moj-rich-text-editor__content').focus()\n}\n","import $ from 'jquery'\n\nexport function SearchToggle(options) {\n  this.options = options\n  this.container = $(this.options.search.container)\n  this.toggleButtonContainer = $(this.options.toggleButton.container)\n\n  if (this.container.data('moj-search-toggle-initialised')) {\n    return\n  }\n\n  this.container.data('moj-search-toggle-initialised', true)\n\n  const svg =\n    '<svg viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"moj-search-toggle__button__icon\"><path d=\"M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z\"></path></svg>'\n\n  this.toggleButton = $(\n    `<button class=\"moj-search-toggle__button\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      ${this.options.toggleButton.text} ${svg}\n    </button>`\n  )\n  this.toggleButton.on('click', $.proxy(this, 'onToggleButtonClick'))\n  this.toggleButtonContainer.append(this.toggleButton)\n  $(document).on('click', this.onDocumentClick.bind(this))\n  $(document).on('focusin', this.onDocumentClick.bind(this))\n}\n\nSearchToggle.prototype.showMenu = function () {\n  this.toggleButton.attr('aria-expanded', 'true')\n  this.container.removeClass('moj-js-hidden')\n  this.container.find('input').first().get(0).focus()\n}\n\nSearchToggle.prototype.hideMenu = function () {\n  this.container.addClass('moj-js-hidden')\n  this.toggleButton.attr('aria-expanded', 'false')\n}\n\nSearchToggle.prototype.onToggleButtonClick = function () {\n  if (this.toggleButton.attr('aria-expanded') === 'false') {\n    this.showMenu()\n  } else {\n    this.hideMenu()\n  }\n}\n\nSearchToggle.prototype.onDocumentClick = function (e) {\n  if (\n    !$.contains(this.toggleButtonContainer[0], e.target) &&\n    !$.contains(this.container[0], e.target)\n  ) {\n    this.hideMenu()\n  }\n}\n","import $ from 'jquery'\n\nexport function SortableTable(params) {\n  this.table = $(params.table)\n\n  if (this.table.data('moj-search-toggle-initialised')) {\n    return\n  }\n\n  this.table.data('moj-search-toggle-initialised', true)\n  this.caption = this.table.find('caption')\n\n  this.upArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M6.5625 15.5L11 6.63125L15.4375 15.5H6.5625Z\" fill=\"currentColor\"/>\n</svg>`\n  this.downArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" vviewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M15.4375 7L11 15.8687L6.5625 7L15.4375 7Z\" fill=\"currentColor\"/>\n</svg>`\n  this.upDownArrow = `<svg width=\"22\" height=\"22\" focusable=\"false\" aria-hidden=\"true\" role=\"img\" vviewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M8.1875 9.5L10.9609 3.95703L13.7344 9.5H8.1875Z\" fill=\"currentColor\"/>\n<path d=\"M13.7344 12.0781L10.9609 17.6211L8.1875 12.0781H13.7344Z\" fill=\"currentColor\"/>\n</svg>`\n\n  this.setupOptions(params)\n  this.body = this.table.find('tbody')\n  this.createHeadingButtons()\n  this.updateCaption()\n  this.updateDirectionIndicators()\n  this.createStatusBox()\n  this.initialiseSortedColumn()\n  this.table.on('click', 'th button', $.proxy(this, 'onSortButtonClick'))\n}\n\nSortableTable.prototype.setupOptions = function (params) {\n  params = params || {}\n  this.statusMessage = params.statusMessage || 'Sort by %heading% (%direction%)'\n  this.ascendingText = params.ascendingText || 'ascending'\n  this.descendingText = params.descendingText || 'descending'\n}\n\nSortableTable.prototype.createHeadingButtons = function () {\n  const headings = this.table.find('thead th')\n  let heading\n  for (let i = 0; i < headings.length; i++) {\n    heading = $(headings[i])\n    if (heading.attr('aria-sort')) {\n      this.createHeadingButton(heading, i)\n    }\n  }\n}\n\nSortableTable.prototype.createHeadingButton = function (heading, i) {\n  const text = heading.text()\n  const button = $(`<button type=\"button\" data-index=\"${i}\">${text}</button>`)\n  heading.text('')\n  heading.append(button)\n}\n\nSortableTable.prototype.createStatusBox = function () {\n  this.status = $(\n    '<div aria-live=\"polite\" role=\"status\" aria-atomic=\"true\" class=\"govuk-visually-hidden\" />'\n  )\n  this.table.parent().append(this.status)\n}\n\nSortableTable.prototype.initialiseSortedColumn = function () {\n  const rows = this.getTableRowsArray()\n\n  this.table\n    .find('th')\n    .filter('[aria-sort=\"ascending\"], [aria-sort=\"descending\"]')\n    .first()\n    .each((index, el) => {\n      const sortDirection = $(el).attr('aria-sort')\n      const columnNumber = $(el).find('button').attr('data-index')\n      const sortedRows = this.sort(rows, columnNumber, sortDirection)\n      this.addRows(sortedRows)\n    })\n}\n\nSortableTable.prototype.onSortButtonClick = function (e) {\n  const button = e.target.closest('button')\n  const columnNumber = button.getAttribute('data-index')\n  const sortDirection = $(button).parent().attr('aria-sort')\n  let newSortDirection\n  if (sortDirection === 'none' || sortDirection === 'descending') {\n    newSortDirection = 'ascending'\n  } else {\n    newSortDirection = 'descending'\n  }\n  const rows = this.getTableRowsArray()\n  const sortedRows = this.sort(rows, columnNumber, newSortDirection)\n  this.addRows(sortedRows)\n  this.removeButtonStates()\n  this.updateButtonState($(e.currentTarget), newSortDirection)\n  this.updateDirectionIndicators()\n}\n\nSortableTable.prototype.updateCaption = function () {\n  const captionElement = this.caption.get(0)\n\n  if (!captionElement) {\n    return\n  }\n\n  let assistiveText = captionElement.querySelector('.govuk-visually-hidden')\n  if (assistiveText) {\n    return\n  }\n\n  assistiveText = document.createElement('span')\n  assistiveText.classList.add('govuk-visually-hidden')\n  assistiveText.textContent = 'â€ˆ(column headers with buttons are sortable).'\n\n  captionElement.appendChild(assistiveText)\n}\n\nSortableTable.prototype.updateButtonState = function (button, direction) {\n  button.parent().attr('aria-sort', direction)\n  let message = this.statusMessage\n  message = message.replace(/%heading%/, button.text())\n  message = message.replace(/%direction%/, this[`${direction}Text`])\n  this.status.text(message)\n}\n\nSortableTable.prototype.updateDirectionIndicators = function () {\n  const component = this\n  this.table.find('th').each(function () {\n    const heading = $(this)\n    const button = heading.find('button')\n    const direction = heading.attr('aria-sort')\n    button.find('svg').remove()\n    switch (direction) {\n      case 'ascending':\n        button.append(component.upArrow)\n        break\n      case 'descending':\n        button.append(component.downArrow)\n        break\n      case 'none':\n        button.append(component.upDownArrow)\n    }\n  })\n}\n\nSortableTable.prototype.removeButtonStates = function () {\n  this.table.find('thead th').attr('aria-sort', 'none')\n}\n\nSortableTable.prototype.addRows = function (rows) {\n  for (let i = 0; i < rows.length; i++) {\n    this.body.append(rows[i])\n  }\n}\n\nSortableTable.prototype.getTableRowsArray = function () {\n  const rows = []\n  const trs = this.body.find('tr')\n  for (let i = 0; i < trs.length; i++) {\n    rows.push(trs[i])\n  }\n  return rows\n}\n\nSortableTable.prototype.sort = function (rows, columnNumber, sortDirection) {\n  const newRows = rows.sort(\n    function (rowA, rowB) {\n      const tdA = $(rowA).find('td,th').eq(columnNumber)\n      const tdB = $(rowB).find('td,th').eq(columnNumber)\n\n      const valueA =\n        sortDirection === 'ascending'\n          ? this.getCellValue(tdA)\n          : this.getCellValue(tdB)\n      const valueB =\n        sortDirection === 'ascending'\n          ? this.getCellValue(tdB)\n          : this.getCellValue(tdA)\n\n      if (typeof valueA === 'string' || typeof valueB === 'string')\n        return valueA.toString().localeCompare(valueB.toString())\n      return valueA - valueB\n    }.bind(this)\n  )\n  return newRows\n}\n\nSortableTable.prototype.getCellValue = function (cell) {\n  const val = cell.attr('data-sort-value') || cell.html()\n\n  const valAsNumber = Number(val)\n  return isNaN(valAsNumber) ? val : valAsNumber\n}\n","/* eslint-disable no-new */\n\nimport $ from 'jquery'\n\nimport { AddAnother } from './components/add-another/add-another.mjs'\nimport { Alert } from './components/alert/alert.mjs'\nimport { ButtonMenu } from './components/button-menu/button-menu.mjs'\nimport { DatePicker } from './components/date-picker/date-picker.mjs'\nimport { FilterToggleButton } from './components/filter-toggle-button/filter-toggle-button.mjs'\nimport { MultiFileUpload } from './components/multi-file-upload/multi-file-upload.mjs'\nimport { MultiSelect } from './components/multi-select/multi-select.mjs'\nimport { PasswordReveal } from './components/password-reveal/password-reveal.mjs'\nimport { RichTextEditor } from './components/rich-text-editor/rich-text-editor.mjs'\nimport { SearchToggle } from './components/search-toggle/search-toggle.mjs'\nimport { SortableTable } from './components/sortable-table/sortable-table.mjs'\nimport { nodeListForEach } from './helpers.mjs'\nimport { version } from './version.mjs'\n\nfunction initAll(options) {\n  // Set the options to an empty object by default if no options are passed.\n  options = typeof options !== 'undefined' ? options : {}\n\n  // Allow the user to initialise MOJ Frontend in only certain sections of the page\n  // Defaults to the entire document if nothing is set.\n  const scope = typeof options.scope !== 'undefined' ? options.scope : document\n\n  const $addAnothers = scope.querySelectorAll('[data-module=\"moj-add-another\"]')\n\n  nodeListForEach($addAnothers, function ($addAnother) {\n    new AddAnother($addAnother)\n  })\n\n  const $multiSelects = scope.querySelectorAll(\n    '[data-module=\"moj-multi-select\"]'\n  )\n\n  nodeListForEach($multiSelects, function ($multiSelect) {\n    new MultiSelect({\n      container: $multiSelect.querySelector(\n        $multiSelect.getAttribute('data-multi-select-checkbox')\n      ),\n      checkboxes: $multiSelect.querySelectorAll(\n        'tbody .govuk-checkboxes__input'\n      ),\n      id_prefix: $multiSelect.getAttribute('data-multi-select-idprefix')\n    })\n  })\n\n  const $passwordReveals = scope.querySelectorAll(\n    '[data-module=\"moj-password-reveal\"]'\n  )\n\n  nodeListForEach($passwordReveals, function ($passwordReveal) {\n    new PasswordReveal($passwordReveal)\n  })\n\n  const $richTextEditors = scope.querySelectorAll(\n    '[data-module=\"moj-rich-text-editor\"]'\n  )\n\n  nodeListForEach($richTextEditors, function ($richTextEditor) {\n    const options = {\n      textarea: $($richTextEditor)\n    }\n\n    const toolbarAttr = $richTextEditor.getAttribute(\n      'data-moj-rich-text-editor-toolbar'\n    )\n\n    if (toolbarAttr) {\n      const toolbar = toolbarAttr.split(',')\n\n      options.toolbar = {}\n\n      for (const item in toolbar) {\n        options.toolbar[toolbar[item]] = true\n      }\n    }\n\n    new RichTextEditor(options)\n  })\n\n  const $searchToggles = scope.querySelectorAll(\n    '[data-module=\"moj-search-toggle\"]'\n  )\n\n  nodeListForEach($searchToggles, function ($searchToggle) {\n    new SearchToggle({\n      toggleButton: {\n        container: $($searchToggle.querySelector('.moj-search-toggle__toggle')),\n        text: $searchToggle.getAttribute('data-moj-search-toggle-text')\n      },\n      search: {\n        container: $($searchToggle.querySelector('.moj-search'))\n      }\n    })\n  })\n\n  const $sortableTables = scope.querySelectorAll(\n    '[data-module=\"moj-sortable-table\"]'\n  )\n\n  nodeListForEach($sortableTables, function ($table) {\n    new SortableTable({\n      table: $table\n    })\n  })\n\n  const $datepickers = scope.querySelectorAll('[data-module=\"moj-date-picker\"]')\n\n  nodeListForEach($datepickers, function ($datepicker) {\n    new DatePicker($datepicker, {}).init()\n  })\n\n  const $buttonMenus = scope.querySelectorAll('[data-module=\"moj-button-menu\"]')\n\n  nodeListForEach($buttonMenus, function ($buttonmenu) {\n    new ButtonMenu($buttonmenu, {}).init()\n  })\n\n  const $alerts = scope.querySelectorAll('[data-module=\"moj-alert\"]')\n  nodeListForEach($alerts, function ($alert) {\n    new Alert($alert, {}).init()\n  })\n}\n\nexport {\n  initAll,\n  version,\n\n  // Components\n  AddAnother,\n  Alert,\n  ButtonMenu,\n  DatePicker,\n  FilterToggleButton,\n  MultiFileUpload,\n  MultiSelect,\n  PasswordReveal,\n  RichTextEditor,\n  SearchToggle,\n  SortableTable\n}\n","export const version = '0.0.0-development'\n"],"names":["AddAnother","container","this","$","data","on","proxy","find","prop","nodeListForEach","nodes","callback","window","NodeList","prototype","forEach","i","length","call","setFocus","$element","options","isFocusable","getAttribute","onBlur","removeAttribute","setAttribute","addEventListener","once","onBeforeFocus","focus","Alert","$module","config","schema","Object","freeze","properties","dismissible","type","dismissText","disableAutoFocus","focusOnDismissSelector","mergeConfigs","parseDataset","dataset","ButtonMenu","buttonText","buttonClasses","alignMenu","DatePicker","excludedDates","excludedDays","leadingZeros","maxDate","minDate","weekStartDay","dayLabels","monthLabels","currentDate","Date","setHours","calendarDays","buttonClass","selectedDayButtonClass","currentDayButtonClass","todayButtonClass","$input","querySelector","DSCalendarDay","button","index","row","column","picker","date","FilterToggleButton","toggleButton","filterContainer","filter","createToggleButton","setupResponsiveChecks","attr","startHidden","hideMenu","MultiFileUpload","params","document","createElement","ondrop","FormData","input","files","fileApiSupported","defaultParams","uploadFileEntryHook","noop","uploadFileExitHook","uploadFileErrorHook","fileDeleteHook","uploadStatusText","dropzoneHintText","dropzoneButtonText","extend","addClass","feedbackContainer","setupFileInput","setupDropzone","setupLabel","setupStatusBox","MultiSelect","idPrefix","id_prefix","allId","toggle","getToggleHtml","append","checkboxes","checked","PasswordReveal","element","el","$el","wrap","parent","createButton","RichTextEditor","documentElement","toolbar","bold","italic","underline","bullets","numbers","textarea","createToolbar","hideDefault","configureToolbar","keys","left","right","up","down","SearchToggle","search","toggleButtonContainer","text","onDocumentClick","bind","SortableTable","table","caption","upArrow","downArrow","upDownArrow","setupOptions","body","createHeadingButtons","updateCaption","updateDirectionIndicators","createStatusBox","initialiseSortedColumn","onAddButtonClick","e","item","getNewItem","updateAttributes","getItems","resetItem","firstItem","first","hasRemoveButton","createRemoveButton","last","after","clone","each","originalId","id","name","replace","siblings","parents","htmlFor","value","onRemoveButtonClick","currentTarget","remove","items","focusHeading","get","init","$dismissButton","innerHTML","event","contains","target","dimiss","$elementToRecieveFocus","$nextSibling","nextElementSibling","matches","selector","$sibling","previousElementSibling","getPreviousSibling","$currentElement","parentElement","findNearestMatchingElement","normaliseString","property","trimmedValue","trim","output","outputType","includes","isFinite","Number","parsed","field","entries","configObjects","formattedConfigObject","configObject","key","option","override","children","classList","className","startsWith","add","split","initMenu","$menu","createMenu","insertAdjacentHTML","toggleTemplate","setupMenuItems","$menuToggle","querySelectorAll","toggleMenu","handleKeyDown","closeMenu","hidden","appendChild","firstChild","Array","from","listItem","insertBefore","tagName","setTimeout","isOpen","preventDefault","focusIndex","detail","openMenu","focusItem","moveFocus","menuItem","currentFocusIndex","activeElement","indexOf","initialized","setOptions","initControls","$dialog","createDialog","createCalendarHeaders","$componentWrapper","$inputWrapper","parentNode","insertAdjacentElement","$calendarButton","$dialogTitle","createCalendar","$prevMonthButton","$prevYearButton","$nextMonthButton","$nextYearButton","$cancelButton","$okButton","focusPreviousMonth","focusPreviousYear","focusNextMonth","focusNextYear","closeDialog","selectDate","dialogButtons","$firstButtonInDialog","$lastButtonInDialog","firstButtonKeydown","lastButtonKeydown","toggleDialog","stopPropagation","backgroundClick","updateCalendar","titleId","dialogTemplate","$tbody","dayCount","$row","insertRow","j","$cell","$dateButton","calendarDay","push","day","html","substring","ret","toString","setMinAndMaxDatesOnCalendar","setExcludedDates","setExcludedDays","setLeadingZeros","setWeekStartDay","formattedDateFromString","map","parseDateRangeString","flat","datestring","dates","startDate","endDate","d","getTime","setDate","getDate","weekDays","toLowerCase","unshift","pop","weekStartDayParam","isExcludedDate","excludedDate","toDateString","getDay","dateString","fallback","formattedDate","dateFormatPattern","test","match","month","year","isNaN","formattedDateFromDate","getMonth","getFullYear","formattedDateHuman","shiftKey","firstOfMonth","dayOfWeek","thisDay","disabled","update","setCurrentDate","calendarDayDate","today","inputDate","enabledDays","getComputedStyle","display","innerText","changeEvent","Event","bubbles","cancelable","dispatchEvent","openDialog","offsetWidth","style","top","offsetHeight","goToDate","current","focusNextDay","focusPreviousDay","focusNextWeek","focusPreviousWeek","focusFirstDayOfWeek","firstDayOfWeekIndex","diff","focusLastDayOfWeek","lastDayOfWeekIndex","setMonth","setFullYear","keyPress","click","label","accessibleLabel","calendarNavKey","mq","matchMedia","bigModeMediaQuery","addListener","checkMode","menuButton","classes","showText","enableBigMode","enableSmallMode","showMenu","removeCloseButton","addCloseButton","closeButton","onCloseClick","removeClass","hideText","onMenuButtonClick","fileInput","dropzone","status","onDragOver","onDragLeave","onDrop","uploadFiles","originalEvent","dataTransfer","uploadFile","onFileChange","replaceWith","val","onFileFocus","onFileBlur","getSuccessHtml","success","messageHtml","getErrorHtml","error","message","getFileRowHtml","file","getDeleteButtonHtml","filename","originalname","formData","ajax","url","uploadUrl","processData","contentType","response","messageText","jqXHR","textStatus","errorThrown","xhr","XMLHttpRequest","upload","lengthComputable","percentComplete","loaded","total","parseInt","onFileDeleteClick","deleteUrl","dataType","onButtonClick","uncheckAll","checkAll","onCheckboxClick","onToolbarKeydown","focusableButton","keyCode","nextButton","next","previousButton","prev","getToolbarHtml","getEnhancedHtml","buttons","execCommand","getContent","onEditorInput","updateTextarea","onLabelClick","onToggleButtonClick","statusMessage","ascendingText","descendingText","headings","heading","createHeadingButton","rows","getTableRowsArray","sortDirection","columnNumber","sortedRows","sort","addRows","onSortButtonClick","closest","newSortDirection","removeButtonStates","updateButtonState","captionElement","assistiveText","textContent","direction","component","trs","rowA","rowB","tdA","eq","tdB","valueA","getCellValue","valueB","localeCompare","cell","valAsNumber","exports","initAll","scope","$addAnother","$multiSelect","$passwordReveal","$richTextEditor","toolbarAttr","$searchToggle","$table","$datepicker","$buttonmenu","$alert","version"],"mappings":"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"}