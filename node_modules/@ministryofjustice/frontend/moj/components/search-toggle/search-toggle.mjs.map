{"version":3,"file":"search-toggle.mjs","sources":["../../../../src/moj/components/search-toggle/search-toggle.mjs"],"sourcesContent":["import $ from 'jquery'\n\nexport function SearchToggle(options) {\n  this.options = options\n  this.container = $(this.options.search.container)\n  this.toggleButtonContainer = $(this.options.toggleButton.container)\n\n  if (this.container.data('moj-search-toggle-initialised')) {\n    return\n  }\n\n  this.container.data('moj-search-toggle-initialised', true)\n\n  const svg =\n    '<svg viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"moj-search-toggle__button__icon\"><path d=\"M7.433,12.5790048 C6.06762625,12.5808611 4.75763941,12.0392925 3.79217348,11.0738265 C2.82670755,10.1083606 2.28513891,8.79837375 2.28699522,7.433 C2.28513891,6.06762625 2.82670755,4.75763941 3.79217348,3.79217348 C4.75763941,2.82670755 6.06762625,2.28513891 7.433,2.28699522 C8.79837375,2.28513891 10.1083606,2.82670755 11.0738265,3.79217348 C12.0392925,4.75763941 12.5808611,6.06762625 12.5790048,7.433 C12.5808611,8.79837375 12.0392925,10.1083606 11.0738265,11.0738265 C10.1083606,12.0392925 8.79837375,12.5808611 7.433,12.5790048 L7.433,12.5790048 Z M14.293,12.579 L13.391,12.579 L13.071,12.269 C14.2300759,10.9245158 14.8671539,9.20813198 14.866,7.433 C14.866,3.32786745 11.5381325,-1.65045755e-15 7.433,-1.65045755e-15 C3.32786745,-1.65045755e-15 -1.65045755e-15,3.32786745 -1.65045755e-15,7.433 C-1.65045755e-15,11.5381325 3.32786745,14.866 7.433,14.866 C9.208604,14.8671159 10.9253982,14.2296624 12.27,13.07 L12.579,13.39 L12.579,14.294 L18.296,20 L20,18.296 L14.294,12.579 L14.293,12.579 Z\"></path></svg>'\n\n  this.toggleButton = $(\n    `<button class=\"moj-search-toggle__button\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      ${this.options.toggleButton.text} ${svg}\n    </button>`\n  )\n  this.toggleButton.on('click', $.proxy(this, 'onToggleButtonClick'))\n  this.toggleButtonContainer.append(this.toggleButton)\n  $(document).on('click', this.onDocumentClick.bind(this))\n  $(document).on('focusin', this.onDocumentClick.bind(this))\n}\n\nSearchToggle.prototype.showMenu = function () {\n  this.toggleButton.attr('aria-expanded', 'true')\n  this.container.removeClass('moj-js-hidden')\n  this.container.find('input').first().get(0).focus()\n}\n\nSearchToggle.prototype.hideMenu = function () {\n  this.container.addClass('moj-js-hidden')\n  this.toggleButton.attr('aria-expanded', 'false')\n}\n\nSearchToggle.prototype.onToggleButtonClick = function () {\n  if (this.toggleButton.attr('aria-expanded') === 'false') {\n    this.showMenu()\n  } else {\n    this.hideMenu()\n  }\n}\n\nSearchToggle.prototype.onDocumentClick = function (e) {\n  if (\n    !$.contains(this.toggleButtonContainer[0], e.target) &&\n    !$.contains(this.container[0], e.target)\n  ) {\n    this.hideMenu()\n  }\n}\n"],"names":[],"mappings":"AAEA,SAAA,YAAA,CAAA,OAAA,EAAA;AACA,EAAA,IAAA,CAAA,OAAA,GAAA;AACA,EAAA,IAAA,CAAA,SAAA,GAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,SAAA;AACA,EAAA,IAAA,CAAA,qBAAA,GAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,YAAA,CAAA,SAAA;;AAEA,EAAA,IAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,+BAAA,CAAA,EAAA;AACA,IAAA;AACA;;AAEA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,+BAAA,EAAA,IAAA;;AAEA,EAAA,MAAA,GAAA;AACA,IAAA;;AAEA,EAAA,IAAA,CAAA,YAAA,GAAA,CAAA;AACA,IAAA,CAAA;AACA,MAAA,EAAA,IAAA,CAAA,OAAA,CAAA,YAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA;AACA,aAAA;AACA;AACA,EAAA,IAAA,CAAA,YAAA,CAAA,EAAA,CAAA,OAAA,EAAA,CAAA,CAAA,KAAA,CAAA,IAAA,EAAA,qBAAA,CAAA;AACA,EAAA,IAAA,CAAA,qBAAA,CAAA,MAAA,CAAA,IAAA,CAAA,YAAA;AACA,EAAA,CAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,OAAA,EAAA,IAAA,CAAA,eAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,EAAA,CAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,SAAA,EAAA,IAAA,CAAA,eAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA;;AAEA,YAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACA,EAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,eAAA,EAAA,MAAA;AACA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,CAAA,eAAA;AACA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,OAAA,CAAA,CAAA,KAAA,EAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,KAAA;AACA;;AAEA,YAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,eAAA;AACA,EAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,eAAA,EAAA,OAAA;AACA;;AAEA,YAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,YAAA;AACA,EAAA,IAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,eAAA,CAAA,KAAA,OAAA,EAAA;AACA,IAAA,IAAA,CAAA,QAAA;AACA,GAAA,MAAA;AACA,IAAA,IAAA,CAAA,QAAA;AACA;AACA;;AAEA,YAAA,CAAA,SAAA,CAAA,eAAA,GAAA,UAAA,CAAA,EAAA;AACA,EAAA;AACA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,IAAA,CAAA,qBAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAA;AACA,IAAA,CAAA,CAAA,CAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,MAAA;AACA,IAAA;AACA,IAAA,IAAA,CAAA,QAAA;AACA;AACA;;;;"}