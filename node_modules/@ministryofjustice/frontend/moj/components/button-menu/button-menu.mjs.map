{"version":3,"file":"button-menu.mjs","sources":["../../../../src/moj/components/button-menu/button-menu.mjs"],"sourcesContent":["/**\n * @typedef {object} ButtonMenuConfig\n * @property {string} [buttonText=Actions] - Label for the toggle button\n * @property {\"left\" | \"right\"} [alignMenu=left] - the alignment of the menu\n * @property {string} [buttonClasses=govuk-button--secondary] - css classes applied to the toggle button\n */\n\n/**\n * @param {HTMLElement} $module\n * @param {ButtonMenuConfig} config\n * @class\n */\nexport function ButtonMenu($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      buttonText: { type: 'string' },\n      buttonClasses: { type: 'string' },\n      alignMenu: { type: 'string' }\n    }\n  })\n\n  const defaults = {\n    buttonText: 'Actions',\n    alignMenu: 'left',\n    buttonClasses: ''\n  }\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  )\n\n  this.$module = $module\n}\n\nButtonMenu.prototype.init = function () {\n  // If only one button is provided, don't initiate a menu and toggle button\n  // if classes have been provided for the toggleButton, apply them to the single item\n  if (this.$module.children.length === 1) {\n    const button = this.$module.children[0]\n    button.classList.forEach((className) => {\n      if (className.startsWith('govuk-button-')) {\n        button.classList.remove(className)\n      }\n      button.classList.remove('moj-button-menu__item')\n    })\n    if (this.config.buttonClasses) {\n      button.classList.add(...this.config.buttonClasses.split(' '))\n    }\n  }\n  // Otherwise intialise a button menu\n  if (this.$module.children.length > 1) {\n    this.initMenu()\n  }\n}\n\nButtonMenu.prototype.initMenu = function () {\n  this.$menu = this.createMenu()\n  this.$module.insertAdjacentHTML('afterbegin', this.toggleTemplate())\n  this.setupMenuItems()\n\n  this.$menuToggle = this.$module.querySelector(':scope > button')\n  this.items = this.$menu.querySelectorAll('a, button')\n\n  this.$menuToggle.addEventListener('click', (event) => {\n    this.toggleMenu(event)\n  })\n\n  this.$module.addEventListener('keydown', (event) => {\n    this.handleKeyDown(event)\n  })\n\n  document.addEventListener('click', (event) => {\n    if (!this.$module.contains(event.target)) {\n      this.closeMenu(false)\n    }\n  })\n}\n\nButtonMenu.prototype.createMenu = function () {\n  const $menu = document.createElement('ul')\n  $menu.setAttribute('role', 'list')\n  $menu.hidden = true\n  $menu.classList.add('moj-button-menu__wrapper')\n  if (this.config.alignMenu === 'right') {\n    $menu.classList.add('moj-button-menu__wrapper--right')\n  }\n\n  this.$module.appendChild($menu)\n  while (this.$module.firstChild !== $menu) {\n    $menu.appendChild(this.$module.firstChild)\n  }\n\n  return $menu\n}\n\nButtonMenu.prototype.setupMenuItems = function () {\n  Array.from(this.$menu.children).forEach((item) => {\n    // wrap item in li tag\n    const listItem = document.createElement('li')\n    this.$menu.insertBefore(listItem, item)\n    listItem.appendChild(item)\n\n    item.setAttribute('tabindex', -1)\n\n    if (item.tagName === 'BUTTON') {\n      item.setAttribute('type', 'button')\n    }\n\n    item.classList.forEach((className) => {\n      if (className.startsWith('govuk-button')) {\n        item.classList.remove(className)\n      }\n    })\n\n    // add a slight delay after click before closing the menu, makes it *feel* better\n    item.addEventListener('click', (event) => {\n      setTimeout(() => {\n        this.closeMenu(false)\n      }, 50)\n    })\n  })\n}\n\nButtonMenu.prototype.toggleTemplate = function () {\n  return `\n    <button type=\"button\" class=\"govuk-button moj-button-menu__toggle-button ${this.config.buttonClasses || ''}\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      <span>\n       ${this.config.buttonText}\n       <svg width=\"11\" height=\"5\" viewBox=\"0 0 11 5\"  xmlns=\"http://www.w3.org/2000/svg\">\n         <path d=\"M5.5 0L11 5L0 5L5.5 0Z\" fill=\"currentColor\"/>\n       </svg>\n      </span>\n    </button>`\n}\n\n/**\n * @returns {boolean}\n */\nButtonMenu.prototype.isOpen = function () {\n  return this.$menuToggle.getAttribute('aria-expanded') === 'true'\n}\n\nButtonMenu.prototype.toggleMenu = function (event) {\n  event.preventDefault()\n\n  // If menu is triggered with mouse don't move focus to first item\n  const keyboardEvent = event.detail === 0\n  const focusIndex = keyboardEvent ? 0 : -1\n\n  if (this.isOpen()) {\n    this.closeMenu()\n  } else {\n    this.openMenu(focusIndex)\n  }\n}\n\n/**\n * Opens the menu and optionally sets the focus to the item with given index\n *\n * @param {number} focusIndex - The index of the item to focus\n */\nButtonMenu.prototype.openMenu = function (focusIndex = 0) {\n  this.$menu.hidden = false\n  this.$menuToggle.setAttribute('aria-expanded', 'true')\n  if (focusIndex !== -1) {\n    this.focusItem(focusIndex)\n  }\n}\n\n/**\n * Closes the menu and optionally returns focus back to menuToggle\n *\n * @param {boolean} moveFocus - whether to return focus to the toggle button\n */\nButtonMenu.prototype.closeMenu = function (moveFocus = true) {\n  this.$menu.hidden = true\n  this.$menuToggle.setAttribute('aria-expanded', 'false')\n  if (moveFocus) {\n    this.$menuToggle.focus()\n  }\n}\n\n/**\n * Focuses the menu item at the specified index\n *\n * @param {number} index - the index of the item to focus\n */\nButtonMenu.prototype.focusItem = function (index) {\n  if (index >= this.items.length) index = 0\n  if (index < 0) index = this.items.length - 1\n\n  const menuItem = this.items.item(index)\n  if (menuItem) {\n    menuItem.focus()\n  }\n}\n\nButtonMenu.prototype.currentFocusIndex = function () {\n  const activeElement = document.activeElement\n  const menuItems = Array.from(this.items)\n\n  return menuItems.indexOf(activeElement)\n}\n\nButtonMenu.prototype.handleKeyDown = function (event) {\n  if (event.target === this.$menuToggle) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault()\n        this.openMenu()\n        break\n      case 'ArrowUp':\n        event.preventDefault()\n        this.openMenu(this.items.length - 1)\n        break\n    }\n  }\n\n  if (this.$menu.contains(event.target) && this.isOpen()) {\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault()\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() + 1)\n        }\n        break\n      case 'ArrowUp':\n        event.preventDefault()\n        if (this.currentFocusIndex() !== -1) {\n          this.focusItem(this.currentFocusIndex() - 1)\n        }\n        break\n      case 'Home':\n        event.preventDefault()\n        this.focusItem(0)\n        break\n      case 'End':\n        event.preventDefault()\n        this.focusItem(this.items.length - 1)\n        break\n    }\n  }\n\n  if (event.key === 'Escape' && this.isOpen()) {\n    this.closeMenu()\n  }\n  if (event.key === 'Tab' && this.isOpen()) {\n    this.closeMenu(false)\n  }\n}\n\n/**\n * Parse dataset\n *\n * Loop over an object and normalise each value using {@link normaliseString},\n * optionally expanding nested `i18n.field`\n *\n * @param {Schema} schema - component schema\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nButtonMenu.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {}\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      if (dataset[field]) {\n        parsed[field] = dataset[field]\n      }\n    }\n  }\n\n  return parsed\n}\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nButtonMenu.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override)\n      } else {\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n"],"names":[],"mappings":"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"}