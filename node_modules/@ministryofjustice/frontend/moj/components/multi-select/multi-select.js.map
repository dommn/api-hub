{"version":3,"file":"multi-select.js","sources":["../../../../src/moj/components/multi-select/multi-select.mjs"],"sourcesContent":["import $ from 'jquery'\n\nexport function MultiSelect(options) {\n  this.container = $(options.container)\n\n  if (this.container.data('moj-multi-select-initialised')) {\n    return\n  }\n\n  this.container.data('moj-multi-select-initialised', true)\n\n  const idPrefix = options.id_prefix\n  let allId = 'checkboxes-all'\n  if (typeof idPrefix !== 'undefined') {\n    allId = `${idPrefix}checkboxes-all`\n  }\n\n  this.toggle = $(this.getToggleHtml(allId))\n  this.toggleButton = this.toggle.find('input')\n  this.toggleButton.on('click', $.proxy(this, 'onButtonClick'))\n  this.container.append(this.toggle)\n  this.checkboxes = $(options.checkboxes)\n  this.checkboxes.on('click', $.proxy(this, 'onCheckboxClick'))\n  this.checked = options.checked || false\n}\n\nMultiSelect.prototype.getToggleHtml = function (allId) {\n  let html = ''\n  html +=\n    '<div class=\"govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox\">'\n  html += `  <input type=\"checkbox\" class=\"govuk-checkboxes__input\" id=\"${allId}\">`\n  html += `  <label class=\"govuk-label govuk-checkboxes__label moj-multi-select__toggle-label\" for=\"${allId}\">`\n  html += '    <span class=\"govuk-visually-hidden\">Select all</span>'\n  html += '  </label>'\n  html += '</div>'\n  return html\n}\n\nMultiSelect.prototype.onButtonClick = function (e) {\n  if (this.checked) {\n    this.uncheckAll()\n    this.toggleButton[0].checked = false\n  } else {\n    this.checkAll()\n    this.toggleButton[0].checked = true\n  }\n}\n\nMultiSelect.prototype.checkAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = true\n    }, this)\n  )\n  this.checked = true\n}\n\nMultiSelect.prototype.uncheckAll = function () {\n  this.checkboxes.each(\n    $.proxy(function (index, el) {\n      el.checked = false\n    }, this)\n  )\n  this.checked = false\n}\n\nMultiSelect.prototype.onCheckboxClick = function (e) {\n  if (!e.target.checked) {\n    this.toggleButton[0].checked = false\n    this.checked = false\n  } else {\n    if (this.checkboxes.filter(':checked').length === this.checkboxes.length) {\n      this.toggleButton[0].checked = true\n      this.checked = true\n    }\n  }\n}\n"],"names":[],"mappings":"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"}