{"version":3,"file":"date-picker.mjs","sources":["../../../../src/moj/components/date-picker/date-picker.mjs"],"sourcesContent":["/**\n * Date picker config\n *\n * @typedef {object} DatePickerConfig\n * @property {string} [excludedDates] - Dates that cannot be selected\n * @property {string} [excludedDays] - Days that cannot be selected\n * @property {boolean} [leadingZeroes] - Whether to add leading zeroes when populating the field\n * @property {string} [minDate] - The earliest available date\n * @property {string} [maxDate] - The latest available date\n * @property {string} [weekStartDay] - First day of the week in calendar view\n */\n\n/**\n * @param {HTMLElement} $module - HTML element\n * @param {DatePickerConfig} config - config object\n * @class\n */\nexport function DatePicker($module, config = {}) {\n  if (!$module) {\n    return this\n  }\n\n  const schema = Object.freeze({\n    properties: {\n      excludedDates: { type: 'string' },\n      excludedDays: { type: 'string' },\n      leadingZeros: { type: 'string' },\n      maxDate: { type: 'string' },\n      minDate: { type: 'string' },\n      weekStartDay: { type: 'string' }\n    }\n  })\n\n  const defaults = {\n    leadingZeros: false,\n    weekStartDay: 'monday'\n  }\n\n  // data attributes override JS config, which overrides defaults\n  this.config = this.mergeConfigs(\n    defaults,\n    config,\n    this.parseDataset(schema, $module.dataset)\n  )\n\n  this.dayLabels = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday',\n    'Saturday',\n    'Sunday'\n  ]\n\n  this.monthLabels = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ]\n\n  this.currentDate = new Date()\n  this.currentDate.setHours(0, 0, 0, 0)\n  this.calendarDays = []\n  this.excludedDates = []\n  this.excludedDays = []\n\n  this.buttonClass = 'moj-datepicker__button'\n  this.selectedDayButtonClass = 'moj-datepicker__button--selected'\n  this.currentDayButtonClass = 'moj-datepicker__button--current'\n  this.todayButtonClass = 'moj-datepicker__button--today'\n\n  this.$module = $module\n  this.$input = $module.querySelector('.moj-js-datepicker-input')\n}\n\nDatePicker.prototype.init = function () {\n  // Check that required elements are present\n  if (!this.$input) {\n    return\n  }\n  if (this.$module.dataset.initialized) {\n    return\n  }\n\n  this.setOptions()\n  this.initControls()\n  this.$module.setAttribute('data-initialized', 'true')\n}\n\nDatePicker.prototype.initControls = function () {\n  this.id = `datepicker-${this.$input.id}`\n\n  this.$dialog = this.createDialog()\n  this.createCalendarHeaders()\n\n  const $componentWrapper = document.createElement('div')\n  const $inputWrapper = document.createElement('div')\n  $componentWrapper.classList.add('moj-datepicker__wrapper')\n  $inputWrapper.classList.add('govuk-input__wrapper')\n\n  this.$input.parentNode.insertBefore($componentWrapper, this.$input)\n  $componentWrapper.appendChild($inputWrapper)\n  $inputWrapper.appendChild(this.$input)\n\n  $inputWrapper.insertAdjacentHTML('beforeend', this.toggleTemplate())\n  $componentWrapper.insertAdjacentElement('beforeend', this.$dialog)\n\n  this.$calendarButton = this.$module.querySelector('.moj-js-datepicker-toggle')\n  this.$dialogTitle = this.$dialog.querySelector(\n    '.moj-js-datepicker-month-year'\n  )\n\n  this.createCalendar()\n\n  this.$prevMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-month'\n  )\n  this.$prevYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-prev-year'\n  )\n  this.$nextMonthButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-month'\n  )\n  this.$nextYearButton = this.$dialog.querySelector(\n    '.moj-js-datepicker-next-year'\n  )\n  this.$cancelButton = this.$dialog.querySelector('.moj-js-datepicker-cancel')\n  this.$okButton = this.$dialog.querySelector('.moj-js-datepicker-ok')\n\n  // add event listeners\n  this.$prevMonthButton.addEventListener('click', (event) =>\n    this.focusPreviousMonth(event, false)\n  )\n  this.$prevYearButton.addEventListener('click', (event) =>\n    this.focusPreviousYear(event, false)\n  )\n  this.$nextMonthButton.addEventListener('click', (event) =>\n    this.focusNextMonth(event, false)\n  )\n  this.$nextYearButton.addEventListener('click', (event) =>\n    this.focusNextYear(event, false)\n  )\n  this.$cancelButton.addEventListener('click', (event) => {\n    event.preventDefault()\n    this.closeDialog(event)\n  })\n  this.$okButton.addEventListener('click', () => {\n    this.selectDate(this.currentDate)\n  })\n\n  const dialogButtons = this.$dialog.querySelectorAll(\n    'button:not([disabled=\"true\"])'\n  )\n  // eslint-disable-next-line prefer-destructuring\n  this.$firstButtonInDialog = dialogButtons[0]\n  this.$lastButtonInDialog = dialogButtons[dialogButtons.length - 1]\n  this.$firstButtonInDialog.addEventListener('keydown', (event) =>\n    this.firstButtonKeydown(event)\n  )\n  this.$lastButtonInDialog.addEventListener('keydown', (event) =>\n    this.lastButtonKeydown(event)\n  )\n\n  this.$calendarButton.addEventListener('click', (event) =>\n    this.toggleDialog(event)\n  )\n\n  this.$dialog.addEventListener('keydown', (event) => {\n    if (event.key === 'Escape') {\n      this.closeDialog()\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  })\n\n  document.body.addEventListener('mouseup', (event) =>\n    this.backgroundClick(event)\n  )\n\n  // populates calendar with initial dates, avoids Wave errors about null buttons\n  this.updateCalendar()\n}\n\nDatePicker.prototype.createDialog = function () {\n  const titleId = `datepicker-title-${this.$input.id}`\n  const $dialog = document.createElement('div')\n\n  $dialog.id = this.id\n  $dialog.setAttribute('class', 'moj-datepicker__dialog')\n  $dialog.setAttribute('role', 'dialog')\n  $dialog.setAttribute('aria-modal', 'true')\n  $dialog.setAttribute('aria-labelledby', titleId)\n  $dialog.innerHTML = this.dialogTemplate(titleId)\n  $dialog.hidden = true\n\n  return $dialog\n}\n\nDatePicker.prototype.createCalendar = function () {\n  const $tbody = this.$dialog.querySelector('tbody')\n  let dayCount = 0\n  for (let i = 0; i < 6; i++) {\n    // create row\n    const $row = $tbody.insertRow(i)\n\n    for (let j = 0; j < 7; j++) {\n      // create cell (day)\n      const $cell = document.createElement('td')\n      const $dateButton = document.createElement('button')\n\n      $cell.appendChild($dateButton)\n      $row.appendChild($cell)\n\n      const calendarDay = new DSCalendarDay($dateButton, dayCount, i, j, this)\n      calendarDay.init()\n      this.calendarDays.push(calendarDay)\n      dayCount++\n    }\n  }\n}\n\nDatePicker.prototype.toggleTemplate = function () {\n  return `<button class=\"moj-datepicker__toggle moj-js-datepicker-toggle\" type=\"button\" aria-haspopup=\"dialog\" aria-controls=\"${this.id}\" aria-expanded=\"false\">\n            <span class=\"govuk-visually-hidden\">Choose date</span>\n            <svg width=\"32\" height=\"24\" focusable=\"false\" class=\"moj-datepicker-icon\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 22 22\">\n              <path\n                fill=\"currentColor\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M16.1333 2.93333H5.86668V4.4C5.86668 5.21002 5.21003 5.86667 4.40002 5.86667C3.59 5.86667 2.93335 5.21002 2.93335 4.4V2.93333H2C0.895431 2.93333 0 3.82877 0 4.93334V19.2667C0 20.3712 0.89543 21.2667 2 21.2667H20C21.1046 21.2667 22 20.3712 22 19.2667V4.93333C22 3.82876 21.1046 2.93333 20 2.93333H19.0667V4.4C19.0667 5.21002 18.41 5.86667 17.6 5.86667C16.79 5.86667 16.1333 5.21002 16.1333 4.4V2.93333ZM20.5333 8.06667H1.46665V18.8C1.46665 19.3523 1.91436 19.8 2.46665 19.8H19.5333C20.0856 19.8 20.5333 19.3523 20.5333 18.8V8.06667Z\"\n              ></path>\n              <rect x=\"3.66669\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n              <rect x=\"16.8667\" width=\"1.46667\" height=\"5.13333\" rx=\"0.733333\" fill=\"currentColor\"></rect>\n            </svg>\n          </button>`\n}\n\n/**\n * HTML template for calendar dialog\n *\n * @param {string} [titleId] - Id attribute for dialog title\n * @returns {string}\n */\nDatePicker.prototype.dialogTemplate = function (titleId) {\n  return `<div class=\"moj-datepicker__dialog-header\">\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-year\">\n                <span class=\"govuk-visually-hidden\">Previous year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.1643 20L28.9572 14.2071L27.5429 12.7929L20.3358 20L27.5429 27.2071L28.9572 25.7929L23.1643 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.1643 20L22.9572 14.2071L21.5429 12.7929L14.3358 20L21.5429 27.2071L22.9572 25.7929L17.1643 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-prev-month\">\n                <span class=\"govuk-visually-hidden\">Previous month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.5729 20L25.7865 14.2071L24.5137 12.7929L18.0273 20L24.5137 27.2071L25.7865 25.7929L20.5729 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n\n            <h2 id=\"${titleId}\" class=\"moj-datepicker__dialog-title moj-js-datepicker-month-year\" aria-live=\"polite\">June 2020</h2>\n\n            <div class=\"moj-datepicker__dialog-navbuttons\">\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-month\">\n                <span class=\"govuk-visually-hidden\">Next month</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\"  focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M23.4271 20L18.2135 14.2071L19.4863 12.7929L25.9727 20L19.4863 27.2071L18.2135 25.7929L23.4271 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n\n              <button class=\"moj-datepicker__button moj-js-datepicker-next-year\">\n                <span class=\"govuk-visually-hidden\">Next year</span>\n                <svg width=\"44\" height=\"40\" viewBox=\"0 0 44 40\" fill=\"none\" fill=\"none\" focusable=\"false\" aria-hidden=\"true\" role=\"img\">\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.8357 20L15.0428 14.2071L16.4571 12.7929L23.6642 20L16.4571 27.2071L15.0428 25.7929L20.8357 20Z\" fill=\"currentColor\"/>\n                  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.8357 20L21.0428 14.2071L22.4571 12.7929L29.6642 20L22.4571 27.2071L21.0428 25.7929L26.8357 20Z\" fill=\"currentColor\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <table class=\"moj-datepicker__calendar moj-js-datepicker-grid\" role=\"grid\" aria-labelledby=\"${titleId}\">\n            <thead>\n              <tr></tr>\n            </thead>\n\n            <tbody></tbody>\n          </table>\n\n          <div class=\"govuk-button-group\">\n            <button type=\"button\" class=\"govuk-button moj-js-datepicker-ok\">Select</button>\n            <button type=\"button\" class=\"govuk-button govuk-button--secondary moj-js-datepicker-cancel\">Close</button>\n          </div>`\n}\n\nDatePicker.prototype.createCalendarHeaders = function () {\n  this.dayLabels.forEach((day) => {\n    const html = `<th scope=\"col\"><span aria-hidden=\"true\">${day.substring(0, 3)}</span><span class=\"govuk-visually-hidden\">${day}</span></th>`\n    const $headerRow = this.$dialog.querySelector('thead > tr')\n    $headerRow.insertAdjacentHTML('beforeend', html)\n  })\n}\n\n/**\n * Pads given number with leading zeros\n *\n * @param {number} value - The value to be padded\n * @param {number} length - The length in characters of the output\n * @returns {string}\n */\nDatePicker.prototype.leadingZeros = function (value, length = 2) {\n  let ret = value.toString()\n\n  while (ret.length < length) {\n    ret = `0${ret}`\n  }\n\n  return ret\n}\n\nDatePicker.prototype.setOptions = function () {\n  this.setMinAndMaxDatesOnCalendar()\n  this.setExcludedDates()\n  this.setExcludedDays()\n  this.setLeadingZeros()\n  this.setWeekStartDay()\n}\n\nDatePicker.prototype.setMinAndMaxDatesOnCalendar = function () {\n  if (this.config.minDate) {\n    this.minDate = this.formattedDateFromString(this.config.minDate, null)\n    if (this.minDate && this.currentDate < this.minDate) {\n      this.currentDate = this.minDate\n    }\n  }\n\n  if (this.config.maxDate) {\n    this.maxDate = this.formattedDateFromString(this.config.maxDate, null)\n    if (this.maxDate && this.currentDate > this.maxDate) {\n      this.currentDate = this.maxDate\n    }\n  }\n}\n\nDatePicker.prototype.setExcludedDates = function () {\n  if (this.config.excludedDates) {\n    this.excludedDates = this.config.excludedDates\n      .replace(/\\s+/, ' ')\n      .split(' ')\n      .map((item) => {\n        return item.includes('-')\n          ? this.parseDateRangeString(item)\n          : this.formattedDateFromString(item)\n      })\n      .flat()\n      .filter((item) => item)\n  }\n}\n\n/*\n * Parses a daterange string into an array of dates\n * @param {String} datestring - A daterange string in the format \"dd/mm/yyyy-dd/mm/yyyy\"\n * @returns {Date[]}\n */\nDatePicker.prototype.parseDateRangeString = function (datestring) {\n  const dates = []\n  const [startDate, endDate] = datestring\n    .split('-')\n    .map((d) => this.formattedDateFromString(d, null))\n\n  if (startDate && endDate) {\n    const date = new Date(startDate.getTime())\n    /* eslint-disable no-unmodified-loop-condition */\n    while (date <= endDate) {\n      dates.push(new Date(date))\n      date.setDate(date.getDate() + 1)\n    }\n    /* eslint-enable no-unmodified-loop-condition */\n  }\n  return dates\n}\n\nDatePicker.prototype.setExcludedDays = function () {\n  if (this.config.excludedDays) {\n    // lowercase and arrange dayLabels to put indexOf sunday == 0 for comparison\n    // with getDay() function\n    const weekDays = this.dayLabels.map((item) => item.toLowerCase())\n    if (this.config.weekStartDay === 'monday') {\n      weekDays.unshift(weekDays.pop())\n    }\n\n    this.excludedDays = this.config.excludedDays\n      .replace(/\\s+/, ' ')\n      .toLowerCase()\n      .split(' ')\n      .map((item) => weekDays.indexOf(item))\n      .filter((item) => item !== -1)\n  }\n}\n\nDatePicker.prototype.setLeadingZeros = function () {\n  if (typeof this.config.leadingZeros !== 'boolean') {\n    if (this.config.leadingZeros.toLowerCase() === 'true') {\n      this.config.leadingZeros = true\n      return\n    }\n    if (this.config.leadingZeros.toLowerCase() === 'false') {\n      this.config.leadingZeros = false\n    }\n  }\n}\n\nDatePicker.prototype.setWeekStartDay = function () {\n  const weekStartDayParam = this.config.weekStartDay\n  if (weekStartDayParam && weekStartDayParam.toLowerCase() === 'sunday') {\n    this.config.weekStartDay = 'sunday'\n    // Rotate dayLabels array to put Sunday as the first item\n    this.dayLabels.unshift(this.dayLabels.pop())\n  } else {\n    this.config.weekStartDay = 'monday'\n  }\n}\n\n/**\n * Determine if a date is selecteable\n *\n * @param {Date} date - the date to check\n * @returns {boolean}\n */\nDatePicker.prototype.isExcludedDate = function (date) {\n  // This comparison does not work correctly - it will exclude the mindate itself\n  // see: https://github.com/ministryofjustice/moj-frontend/issues/923\n  if (this.minDate && this.minDate > date) {\n    return true\n  }\n\n  // This comparison works as expected - the maxdate will not be excluded\n  if (this.maxDate && this.maxDate < date) {\n    return true\n  }\n\n  for (const excludedDate of this.excludedDates) {\n    if (date.toDateString() === excludedDate.toDateString()) {\n      return true\n    }\n  }\n\n  if (this.excludedDays.includes(date.getDay())) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Get a Date object from a string\n *\n * @param {string} dateString - string in the format d/m/yyyy dd/mm/yyyy\n * @param {Date} fallback - date object to return if formatting fails\n * @returns {Date}\n */\nDatePicker.prototype.formattedDateFromString = function (\n  dateString,\n  fallback = new Date()\n) {\n  let formattedDate = null\n  // Accepts d/m/yyyy and dd/mm/yyyy\n  const dateFormatPattern = /(\\d{1,2})([-/,. ])(\\d{1,2})\\2(\\d{4})/\n\n  if (!dateFormatPattern.test(dateString)) return fallback\n\n  const match = dateString.match(dateFormatPattern)\n  const day = match[1]\n  const month = match[3]\n  const year = match[4]\n\n  formattedDate = new Date(`${year}-${month}-${day}`)\n  if (formattedDate instanceof Date && !isNaN(formattedDate)) {\n    return formattedDate\n  }\n  return fallback\n}\n\n/**\n * Get a formatted date string from a Date object\n *\n * @param {Date} date - date to format to a string\n * @returns {string}\n */\nDatePicker.prototype.formattedDateFromDate = function (date) {\n  if (this.config.leadingZeros) {\n    return `${this.leadingZeros(date.getDate())}/${this.leadingZeros(date.getMonth() + 1)}/${date.getFullYear()}`\n  }\n\n  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\n}\n\n/**\n * Get a human readable date in the format Monday 2 March 2024\n *\n * @param {Date} date - date to format\n * @returns {string}\n */\nDatePicker.prototype.formattedDateHuman = function (date) {\n  return `${this.dayLabels[(date.getDay() + 6) % 7]} ${date.getDate()} ${this.monthLabels[date.getMonth()]} ${date.getFullYear()}`\n}\n\nDatePicker.prototype.backgroundClick = function (event) {\n  if (\n    this.isOpen() &&\n    !this.$dialog.contains(event.target) &&\n    !this.$input.contains(event.target) &&\n    !this.$calendarButton.contains(event.target)\n  ) {\n    event.preventDefault()\n    this.closeDialog()\n  }\n}\n\nDatePicker.prototype.firstButtonKeydown = function (event) {\n  if (event.key === 'Tab' && event.shiftKey) {\n    this.$lastButtonInDialog.focus()\n    event.preventDefault()\n  }\n}\n\nDatePicker.prototype.lastButtonKeydown = function (event) {\n  if (event.key === 'Tab' && !event.shiftKey) {\n    this.$firstButtonInDialog.focus()\n    event.preventDefault()\n  }\n}\n\n// render calendar\nDatePicker.prototype.updateCalendar = function () {\n  this.$dialogTitle.innerHTML = `${this.monthLabels[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`\n\n  const day = this.currentDate\n  const firstOfMonth = new Date(day.getFullYear(), day.getMonth(), 1)\n  let dayOfWeek\n\n  if (this.config.weekStartDay === 'monday') {\n    dayOfWeek = firstOfMonth.getDay() === 0 ? 6 : firstOfMonth.getDay() - 1 // Change logic to make Monday first day of week, i.e. 0\n  } else {\n    dayOfWeek = firstOfMonth.getDay()\n  }\n\n  firstOfMonth.setDate(firstOfMonth.getDate() - dayOfWeek)\n\n  const thisDay = new Date(firstOfMonth)\n\n  // loop through our days\n  for (let i = 0; i < this.calendarDays.length; i++) {\n    const hidden = thisDay.getMonth() !== day.getMonth()\n    const disabled = this.isExcludedDate(thisDay)\n\n    this.calendarDays[i].update(thisDay, hidden, disabled)\n\n    thisDay.setDate(thisDay.getDate() + 1)\n  }\n}\n\nDatePicker.prototype.setCurrentDate = function (focus = true) {\n  const { currentDate } = this\n  this.calendarDays.forEach((calendarDay) => {\n    calendarDay.button.classList.add('moj-datepicker__button')\n    calendarDay.button.classList.add('moj-datepicker__calendar-day')\n    calendarDay.button.setAttribute('tabindex', -1)\n    calendarDay.button.classList.remove(this.selectedDayButtonClass)\n    const calendarDayDate = calendarDay.date\n    calendarDayDate.setHours(0, 0, 0, 0)\n\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    if (\n      calendarDayDate.getTime() ===\n      currentDate.getTime() /* && !calendarDay.button.disabled */\n    ) {\n      if (focus) {\n        calendarDay.button.setAttribute('tabindex', 0)\n        calendarDay.button.focus()\n        calendarDay.button.classList.add(this.selectedDayButtonClass)\n      }\n    }\n\n    if (\n      this.inputDate &&\n      calendarDayDate.getTime() === this.inputDate.getTime()\n    ) {\n      calendarDay.button.classList.add(this.currentDayButtonClass)\n      calendarDay.button.setAttribute('aria-current', 'date')\n    } else {\n      calendarDay.button.classList.remove(this.currentDayButtonClass)\n      calendarDay.button.removeAttribute('aria-current')\n    }\n\n    if (calendarDayDate.getTime() === today.getTime()) {\n      calendarDay.button.classList.add(this.todayButtonClass)\n    } else {\n      calendarDay.button.classList.remove(this.todayButtonClass)\n    }\n  })\n\n  // if no date is tab-able, make the first non-disabled date tab-able\n  if (!focus) {\n    const enabledDays = this.calendarDays.filter((calendarDay) => {\n      return (\n        window.getComputedStyle(calendarDay.button).display === 'block' &&\n        !calendarDay.button.disabled\n      )\n    })\n\n    enabledDays[0].button.setAttribute('tabindex', 0)\n\n    this.currentDate = enabledDays[0].date\n  }\n}\n\nDatePicker.prototype.selectDate = function (date) {\n  if (this.isExcludedDate(date)) {\n    return\n  }\n\n  this.$calendarButton.querySelector('span').innerText =\n    `Choose date. Selected date is ${this.formattedDateHuman(date)}`\n  this.$input.value = this.formattedDateFromDate(date)\n\n  const changeEvent = new Event('change', { bubbles: true, cancelable: true })\n  this.$input.dispatchEvent(changeEvent)\n\n  this.closeDialog()\n}\n\nDatePicker.prototype.isOpen = function () {\n  return this.$dialog.classList.contains('moj-datepicker__dialog--open')\n}\n\nDatePicker.prototype.toggleDialog = function (event) {\n  event.preventDefault()\n  if (this.isOpen()) {\n    this.closeDialog()\n  } else {\n    this.setMinAndMaxDatesOnCalendar()\n    this.openDialog()\n  }\n}\n\nDatePicker.prototype.openDialog = function () {\n  this.$dialog.hidden = false\n  this.$dialog.classList.add('moj-datepicker__dialog--open')\n  this.$calendarButton.setAttribute('aria-expanded', 'true')\n\n  // position the dialog\n  // if input is wider than dialog pin it to the right\n  if (this.$input.offsetWidth > this.$dialog.offsetWidth) {\n    this.$dialog.style.right = `0px`\n  }\n  this.$dialog.style.top = `${this.$input.offsetHeight + 3}px`\n\n  // get the date from the input element\n  this.inputDate = this.formattedDateFromString(this.$input.value)\n  this.currentDate = this.inputDate\n  this.currentDate.setHours(0, 0, 0, 0)\n\n  this.updateCalendar()\n  this.setCurrentDate()\n}\n\nDatePicker.prototype.closeDialog = function () {\n  this.$dialog.hidden = true\n  this.$dialog.classList.remove('moj-datepicker__dialog--open')\n  this.$calendarButton.setAttribute('aria-expanded', 'false')\n  this.$calendarButton.focus()\n}\n\nDatePicker.prototype.goToDate = function (date, focus) {\n  const current = this.currentDate\n  this.currentDate = date\n\n  if (\n    current.getMonth() !== this.currentDate.getMonth() ||\n    current.getFullYear() !== this.currentDate.getFullYear()\n  ) {\n    this.updateCalendar()\n  }\n\n  this.setCurrentDate(focus)\n}\n\n// day navigation\nDatePicker.prototype.focusNextDay = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() + 1)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusPreviousDay = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() - 1)\n  this.goToDate(date)\n}\n\n// week navigation\nDatePicker.prototype.focusNextWeek = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() + 7)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusPreviousWeek = function () {\n  const date = new Date(this.currentDate)\n  date.setDate(date.getDate() - 7)\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusFirstDayOfWeek = function () {\n  const date = new Date(this.currentDate)\n  const firstDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 0 : 1\n  const dayOfWeek = date.getDay()\n  const diff =\n    dayOfWeek >= firstDayOfWeekIndex\n      ? dayOfWeek - firstDayOfWeekIndex\n      : 6 - dayOfWeek\n\n  date.setDate(date.getDate() - diff)\n  date.setHours(0, 0, 0, 0)\n\n  this.goToDate(date)\n}\n\nDatePicker.prototype.focusLastDayOfWeek = function () {\n  const date = new Date(this.currentDate)\n  const lastDayOfWeekIndex = this.config.weekStartDay === 'sunday' ? 6 : 0\n  const dayOfWeek = date.getDay()\n  const diff =\n    dayOfWeek <= lastDayOfWeekIndex\n      ? lastDayOfWeekIndex - dayOfWeek\n      : 7 - dayOfWeek\n\n  date.setDate(date.getDate() + diff)\n  date.setHours(0, 0, 0, 0)\n\n  this.goToDate(date)\n}\n\n// month navigation\nDatePicker.prototype.focusNextMonth = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setMonth(date.getMonth() + 1, 1)\n  this.goToDate(date, focus)\n}\n\nDatePicker.prototype.focusPreviousMonth = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setMonth(date.getMonth() - 1, 1)\n  this.goToDate(date, focus)\n}\n\n// year navigation\nDatePicker.prototype.focusNextYear = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setFullYear(date.getFullYear() + 1, date.getMonth(), 1)\n  this.goToDate(date, focus)\n}\n\nDatePicker.prototype.focusPreviousYear = function (event, focus = true) {\n  event.preventDefault()\n  const date = new Date(this.currentDate)\n  date.setFullYear(date.getFullYear() - 1, date.getMonth(), 1)\n  this.goToDate(date, focus)\n}\n\n/**\n * Parse dataset\n *\n * @param {Schema} schema - Component class\n * @param {DOMStringMap} dataset - HTML element dataset\n * @returns {object} Normalised dataset\n */\nDatePicker.prototype.parseDataset = function (schema, dataset) {\n  const parsed = {}\n\n  for (const [field, ,] of Object.entries(schema.properties)) {\n    if (field in dataset) {\n      parsed[field] = dataset[field]\n    }\n  }\n\n  return parsed\n}\n\n/**\n * Config merging function\n *\n * Takes any number of objects and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @param {...{ [key: string]: unknown }} configObjects - Config objects to merge\n * @returns {{ [key: string]: unknown }} A merged config object\n */\nDatePicker.prototype.mergeConfigs = function (...configObjects) {\n  const formattedConfigObject = {}\n\n  // Loop through each of the passed objects\n  for (const configObject of configObjects) {\n    for (const key of Object.keys(configObject)) {\n      const option = formattedConfigObject[key]\n      const override = configObject[key]\n\n      // Push their keys one-by-one into formattedConfigObject. Any duplicate\n      // keys with object values will be merged, otherwise the new value will\n      // override the existing value.\n      if (typeof option === 'object' && typeof override === 'object') {\n        // @ts-expect-error Index signature for type 'string' is missing\n        formattedConfigObject[key] = this.mergeConfigs(option, override)\n      } else {\n        formattedConfigObject[key] = override\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n *\n * @param {HTMLElement} button\n * @param {number} index\n * @param {number} row\n * @param {number} column\n * @param {DatePicker} picker\n * @class\n */\nfunction DSCalendarDay(button, index, row, column, picker) {\n  this.index = index\n  this.row = row\n  this.column = column\n  this.button = button\n  this.picker = picker\n\n  this.date = new Date()\n}\n\nDSCalendarDay.prototype.init = function () {\n  this.button.addEventListener('keydown', this.keyPress.bind(this))\n  this.button.addEventListener('click', this.click.bind(this))\n}\n\n/**\n * @param {Date} day - the Date for the calendar day\n * @param {boolean} hidden - visibility of the day\n * @param {boolean} disabled - is the day selectable or excluded\n */\nDSCalendarDay.prototype.update = function (day, hidden, disabled) {\n  const label = day.getDate()\n  let accessibleLabel = this.picker.formattedDateHuman(day)\n\n  if (disabled) {\n    this.button.setAttribute('aria-disabled', true)\n    accessibleLabel = `Excluded date, ${accessibleLabel}`\n  } else {\n    this.button.removeAttribute('aria-disabled')\n  }\n\n  if (hidden) {\n    this.button.style.display = 'none'\n  } else {\n    this.button.style.display = 'block'\n  }\n  this.button.setAttribute(\n    'data-testid',\n    this.picker.formattedDateFromDate(day)\n  )\n\n  this.button.innerHTML = `<span class=\"govuk-visually-hidden\">${accessibleLabel}</span><span aria-hidden=\"true\">${label}</span>`\n  this.date = new Date(day)\n}\n\nDSCalendarDay.prototype.click = function (event) {\n  this.picker.goToDate(this.date)\n  this.picker.selectDate(this.date)\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nDSCalendarDay.prototype.keyPress = function (event) {\n  let calendarNavKey = true\n\n  switch (event.key) {\n    case 'ArrowLeft':\n      this.picker.focusPreviousDay()\n      break\n    case 'ArrowRight':\n      this.picker.focusNextDay()\n      break\n    case 'ArrowUp':\n      this.picker.focusPreviousWeek()\n      break\n    case 'ArrowDown':\n      this.picker.focusNextWeek()\n      break\n    case 'Home':\n      this.picker.focusFirstDayOfWeek()\n      break\n    case 'End':\n      this.picker.focusLastDayOfWeek()\n      break\n    case 'PageUp':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusPreviousYear(event)\n        : this.picker.focusPreviousMonth(event)\n      break\n    case 'PageDown':\n      // eslint-disable-next-line no-unused-expressions\n      event.shiftKey\n        ? this.picker.focusNextYear(event)\n        : this.picker.focusNextMonth(event)\n      break\n    default:\n      calendarNavKey = false\n      break\n  }\n\n  if (calendarNavKey) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n}\n\n/**\n * Schema for component config\n *\n * @typedef {object} Schema\n * @property {{ [field: string]: SchemaProperty | undefined }} properties - Schema properties\n */\n\n/**\n * Schema property for component config\n *\n * @typedef {object} SchemaProperty\n * @property {'string' | 'boolean' | 'number' | 'object'} type - Property type\n */\n"],"names":[],"mappings":"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"}